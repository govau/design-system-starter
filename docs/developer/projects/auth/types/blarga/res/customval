var foolproof=function(){};foolproof.is=function(n,t,i,r){if(r){var u=function(n){return n==null||n==undefined||n==""},f=u(n),e=u(i);if(f&&!e||e&&!f)return!0}var o=function(n){return+n==n&&n.length>0},s=function(n){var t=new RegExp(/(?=\d)^(?:(?!(?:10\D(?:0?[5-9]|1[0-4])\D(?:1582))|(?:0?9\D(?:0?[3-9]|1[0-3])\D(?:1752)))((?:0?[13578]|1[02])|(?:0?[469]|11)(?!\/31)(?!-31)(?!\.31)|(?:0?2(?=.?(?:(?:29.(?!000[04]|(?:(?:1[^0-6]|[2468][^048]|[3579][^26])00))(?:(?:(?:\d\d)(?:[02468][048]|[13579][26])(?!\x20BC))|(?:00(?:42|3[0369]|2[147]|1[258]|09)\x20BC))))))|(?:0?2(?=.(?:(?:\d\D)|(?:[01]\d)|(?:2[0-8])))))([-.\/])(0?[1-9]|[12]\d|3[01])\2(?!0000)((?=(?:00(?:4[0-5]|[0-3]?\d)\x20BC)|(?:\d{4}(?!\x20BC)))\d{4}(?:\x20BC)?)(?:$|(?=\x20\d)\x20))?((?:(?:0?[1-9]|1[012])(?::[0-5]\d){0,2}(?:\x20[aApP][mM]))|(?:[01]\d|2[0-3])(?::[0-5]\d){1,2})?$/);return t.test(n)},h=function(n){return n===!0||n===!1||n==="true"||n==="false"};s(n)?(n=Date.parse(n),i=Date.parse(i)):h(n)?(n=="false"&&(n=!1),i=="false"&&(i=!1),n=!!n,i=!!i):o(n)&&(n=parseFloat(n),i=parseFloat(i));switch(t){case"EqualTo":if(n==i)return!0;break;case"NotEqualTo":if(n!=i)return!0;break;case"GreaterThan":if(n>i)return!0;break;case"LessThan":if(n<i)return!0;break;case"GreaterThanOrEqualTo":if(n>=i)return!0;break;case"LessThanOrEqualTo":if(n<=i)return!0;break;case"RegExMatch":return new RegExp(i).test(n);case"NotRegExMatch":return!new RegExp(i).test(n)}return!1};foolproof.getId=function(n,t){var i=n.id.lastIndexOf("_")+1;return n.id.substr(0,i)+t.replace(/\./g,"_")};foolproof.getName=function(n,t){var i=n.name.lastIndexOf(".")+1;return n.name.substr(0,i)+t},function(){jQuery.validator.addMethod("is",function(n,t,i){var r=foolproof.getId(t,i.dependentproperty),u=i.operator,f=i.passonnull,e=document.getElementById(r).value;return foolproof.is(n,u,e,f)?!0:!1});jQuery.validator.addMethod("requiredif",function(n,t,i){var o=foolproof.getName(t,i.dependentproperty),s=i.dependentvalue,h=i.operator,e=i.pattern,r=document.getElementsByName(o),u=null,f;if(r.length>1){for(f=0;f!=r.length;f++)if(r[f].checked){u=r[f].value;break}u==null&&(u=!1)}else u=r[0].value;if(foolproof.is(u,h,s))if(e==null){if(n!=null&&n.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"")!="")return!0}else return new RegExp(e).test(n);else return!0;return!1});jQuery.validator.addMethod("requiredifempty",function(n,t,i){var u=foolproof.getId(t,i.dependentproperty),r=document.getElementById(u).value;if(r==null||r.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"")==""){if(n!=null&&n.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"")!="")return!0}else return!0;return!1});jQuery.validator.addMethod("requiredifnotempty",function(n,t,i){var u=foolproof.getId(t,i.dependentproperty),r=document.getElementById(u).value;if(r!=null&&r.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"")!=""){if(n!=null&&n.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"")!="")return!0}else return!0;return!1});var n=function(n,t,i){n.rules[t]=i;n.message&&(n.messages[t]=n.message)},t=$.validator.unobtrusive;t.adapters.add("requiredif",["dependentproperty","dependentvalue","operator","pattern"],function(t){var i={dependentproperty:t.params.dependentproperty,dependentvalue:t.params.dependentvalue,operator:t.params.operator,pattern:t.params.pattern};n(t,"requiredif",i)});t.adapters.add("is",["dependentproperty","operator","passonnull"],function(t){n(t,"is",{dependentproperty:t.params.dependentproperty,operator:t.params.operator,passonnull:t.params.passonnull})});t.adapters.add("requiredifempty",["dependentproperty"],function(t){n(t,"requiredifempty",{dependentproperty:t.params.dependentproperty})});t.adapters.add("requiredifnotempty",["dependentproperty"],function(t){n(t,"requiredifnotempty",{dependentproperty:t.params.dependentproperty})})}(),function(n){n.extend(n.validator.prototype,{shouldValidateOnSubmitActionOverride:!1,shouldValidateOnSubmitAction:function(t,i){return this.shouldValidateOnSubmitActionOverride||n(t).closest("form").data("submit-action")===i.action}});n.validator.addMethod("requiredonsubmitaction",function(t,i,r){return this.shouldValidateOnSubmitAction(i,r)?n.validator.methods.required.call(this,t,i,r):!0});n.validator.addMethod("nothingselectedcheckboxlistonsubmitaction",function(t,i,r){return this.shouldValidateOnSubmitAction(i,r)?n.validator.methods.nothingselectedcheckboxlist.call(this,t,i,r):!0});n.validator.addMethod("requiredonsubmitactionifin",function(t,i,r){var f=!0,u,e,o;return this.shouldValidateOnSubmitAction(i,r)&&(t==null||t.trim().length==0)&&(u=n("#"+foolproof.getId(i,r.dependentproperty)),u&&u.length!=0||(u=n('[name="'+foolproof.getName(i,r.dependentproperty)+'"]'),u.length>1&&(u=u.filter(":checked"))),e=u.val(),o=n.parseJSON(r.errormap),n.each(o,function(t,r){if(t==e){f=!1;var u=n(i).closest("form").validate();return u.settings.messages[i.name]=r,!1}})),f});n.validator.addMethod("booleanrequiredonsubmitactionif",function(t,i,r){var u=!0,f;return this.shouldValidateOnSubmitAction(i,r)&&(t&&t.trim().toLowerCase()=="true"||(f=n("#"+foolproof.getId(i,r.dependentproperty)).val(),f==r.dependentvalue&&(u=!1))),u});n.validator.addMethod("validateincometypeonsubmitaction",function(t,i,r){var u=!0;if(this.shouldValidateOnSubmitAction(i,r)&&(t==null||t.length==0)){var f=parseInt(r.incometypecode),e=n(i).closest("div.addPersonRow"),o=e.find("div.PersonIncomeRows select.income-select").filter(function(){return n(this).val()==f});o.length>0&&(u=!1)}return u});n.validator.unobtrusive.adapters.add("requiredonsubmitaction",["action"],function(n){n.rules.requiredonsubmitaction={action:n.params.action};n.messages.requiredonsubmitaction=n.message});n.validator.unobtrusive.adapters.add("nothingselectedcheckboxlistonsubmitaction",["action"],function(n){n.rules.nothingselectedcheckboxlistonsubmitaction={action:n.params.action};n.messages.nothingselectedcheckboxlistonsubmitaction=n.message});n.validator.unobtrusive.adapters.add("requiredonsubmitactionifin",["action","dependentproperty","errormap"],function(n){n.rules.requiredonsubmitactionifin={action:n.params.action,dependentproperty:n.params.dependentproperty,errormap:n.params.errormap}});n.validator.unobtrusive.adapters.add("booleanrequiredonsubmitactionif",["action","dependentproperty","dependentvalue"],function(n){n.rules.booleanrequiredonsubmitactionif={action:n.params.action,dependentproperty:n.params.dependentproperty,dependentvalue:n.params.dependentvalue};n.messages.booleanrequiredonsubmitactionif=n.message});n.validator.unobtrusive.adapters.add("validateincometypeonsubmitaction",["action","incometypecode"],function(n){n.rules.validateincometypeonsubmitaction={action:n.params.action,incometypecode:n.params.incometypecode};n.messages.validateincometypeonsubmitaction=n.message});n.validator.addMethod("requiredonsubmitactionif",function(t,i,r){return this.shouldValidateOnSubmitAction(i,r)?n.validator.methods.requiredif.call(this,t,i,r):!0});n.validator.addMethod("requiredonsubmitactionifempty",function(t,i,r){return this.shouldValidateOnSubmitAction(i,r)?n.validator.methods.requiredifempty.call(this,t,i,r):!0});n.validator.addMethod("requiredonsubmitactionifnotempty",function(t,i,r){return this.shouldValidateOnSubmitAction(i,r)?n.validator.methods.requiredifnotempty.call(this,t,i,r):!0});n.validator.unobtrusive.adapters.add("requiredonsubmitactionif",["action","dependentproperty","dependentvalue","operator","pattern"],function(n){n.rules.requiredonsubmitactionif={action:n.params.action,dependentproperty:n.params.dependentproperty,dependentvalue:n.params.dependentvalue,operator:n.params.operator,pattern:n.params.pattern};n.messages.requiredonsubmitactionif=n.message});n.validator.unobtrusive.adapters.add("requiredonsubmitactionifempty",["action","dependentproperty"],function(n){n.rules.requiredonsubmitactionifempty={action:n.params.action,dependentproperty:n.params.dependentproperty};n.messages.requiredonsubmitactionifempty=n.message});n.validator.unobtrusive.adapters.add("requiredonsubmitactionifnotempty",["action","dependentproperty"],function(n){n.rules.requiredonsubmitactionifnotempty={action:n.params.action,dependentproperty:n.params.dependentproperty};n.messages.requiredonsubmitactionifnotempty=n.message})}(jQuery);$(document).ready(function(){$(":submit").click(function(){$(this).closest("form").data("submit-action",this.value)})}),function(n){n.validator.addMethod("sqldaterange",function(t){if(!t||!t.length)return!0;try{var i=n.datepicker.parseDate("dd/mm/yy",t.replace(/\./g,"/"))}catch(r){return!1}return i>=new Date(1800,0,1)});n.validator.addMethod("minimumdateofbirth",function(t){if(!t||!t.length)return!0;try{var i=n.datepicker.parseDate("dd/mm/yy",t.replace(/\./g,"/"))}catch(r){return!1}return i<=new Date&&i>=new Date(1800,0,1)});n.validator.addMethod("validatefutureonlydate",function(t){var r,i,u;if(!t||!t.length)return!0;try{r=n.datepicker.parseDate("d/m/yy",t.replace(/\./g,"/"))}catch(f){return!1}return i=new Date,u=new Date(i.getFullYear(),i.getMonth(),i.getDate()),r>=u});n.validator.addMethod("notapplicableonlycheckboxlist",function(t,r){var u=n("[name='"+r.name+"']"),f=!1;for(i=0;i<=u.length-1;i++)if(u[i].value!="NotApplicable"&&u[i].checked)f=!0;else if(u[i].value=="NotApplicable"&&u[i].checked&&f)return!1;return!0});n.validator.addMethod("nothingselectedcheckboxlist",function(t,r){var u=n("[name='"+r.name+"']");for(i=0;i<=u.length-1;i++)if(u[i].checked)return!0;return!1});n.validator.addMethod("atleastoneselected",function(n){return!n||!n.length?!1:!0});n.validator.addMethod("validatenumberofdependants",function(t,i,r){var o=!0,f,u,e;return t!=null&&t.length>0&&(f=parseInt(t),isNaN(f)||(u=n("#"+r).val(),u==null||isNaN(parseInt(u))||u==4||(e=u==0||u==1,(e&&f>0||!e&&f==0)&&(o=!1)))),o});n.validator.addMethod("validatetenantsforhousehold",function(t,i,r){var e=!0,u,f;return t!=null&&t.length>0&&(u=parseInt(t),isNaN(u)||(f=n(r).length,((u==0||u==2)&&f!==1||(u==1||u==3)&&f!==2)&&(e=!1))),e});var r=function(n,t,i){n.rules[t]=i;n.message&&(n.messages[t]=n.message)},t=n.validator.unobtrusive;t.adapters.addBool("atleastoneselected");t.adapters.add("sqldaterange",[],function(n){r(n,"sqldaterange",{})});t.adapters.add("minimumdateofbirth",[],function(n){r(n,"minimumdateofbirth",{})});t.adapters.add("notapplicableonlycheckboxlist",[],function(n){r(n,"notapplicableonlycheckboxlist",{})});t.adapters.add("nothingselectedcheckboxlist",[],function(n){r(n,"nothingselectedcheckboxlist",{})});t.adapters.addBool("booleanrequired","required");t.adapters.addBool("validatefutureonlydate");t.adapters.addSingleVal("validatenumberofdependants","householdtypeproperty");t.adapters.addSingleVal("validatetenantsforhousehold","tenantselector");n.fn.updateValidation=function(t){var r=n(this),i=r.closest("form").removeData("validator").removeData("unobtrusiveValidation").off("submit.validate click.validate focusin.validate focusout.validate keyup.validate");if(n.validator.unobtrusive.parse(i),i.data("validator").settings.ignore="",t){i.off("invalid-form.validate");i.on("invalid-form.validate",t)}return r};n.extend(n.validator.prototype,{checkRequired:function(t){t=this.validationTargetFor(this.clean(t));var i=n(t).rules(),h=n.map(i,function(n,t){return t}).length,o=!1,u=this.elementValue(t),s,r,f;if(typeof i.normalizer=="function"){if(u=i.normalizer.call(t,u),typeof u!="string")throw new TypeError("The normalizer should return a string value.");delete i.normalizer}for(r in i)if(/^required/.test(r)||/onsubmitaction/.test(r)){f={method:r,parameters:i[r]};this.shouldValidateOnSubmitActionOverride=!0;try{if(s=n.validator.methods[r].call(this,u,t,f.parameters),this.shouldValidateOnSubmitActionOverride=!1,s==="dependency-mismatch"&&h===1){o=!0;continue}if(o=!1,!s)return!1}catch(e){this.shouldValidateOnSubmitActionOverride=!1;this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+f.method+"' method.",e);e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+f.method+"' method.");throw e;}}if(!o)return!0}})}(jQuery)