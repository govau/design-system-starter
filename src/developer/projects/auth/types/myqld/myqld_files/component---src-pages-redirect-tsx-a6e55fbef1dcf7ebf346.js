(window.webpackJsonp=window.webpackJsonp||[]).push([[28,39],{scg8:function(e,t,n){"use strict";n.r(t),n.d(t,"StyledWrapper",(function(){return A}));n("rE2o"),n("ioFf"),n("VRzm"),n("Btvt"),n("Z2Ku"),n("L9s1");var a=n("o0o1"),r=n.n(a),o=(n("ls82"),n("q1tI")),c=n.n(o),i=n("vqTq"),s=n("asXk"),u=n("eJi6"),l=n("q8UK"),f=n.n(l),d=n("7LEp"),p=n("CLrh"),m=n("ttZb"),b=n("Wbzz"),v=n("bjRM"),w=n("YCiF"),g=n("vOnD"),h=n("N9+v"),k=n("gxW4"),y=(n("rGqo"),n("yt8O"),n("RW0V"),n("91GP"),n("C2HB")),x=n("mTwe");function O(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(u){return void n(u)}i.done?t(s):Promise.resolve(s).then(a,r)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){O(o,a,r,c,i,"next",e)}function i(e){O(o,a,r,c,i,"throw",e)}c(void 0)}))}}var C=function(e,t){var n={firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,dob:e.dob,email:e.email},a={firstName:t.firstName||"",middleName:t.middleName||"",lastName:t.lastName||"",dob:t.dob||"",email:t.email||""},r=Object.assign({},t,a);return{mergedData:Object.assign({},r,n),contact:r}},E=function(){var e=N(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(y.a)(),Object.keys(t).forEach((function(e){return null===t[e]&&delete t[e]})),e.next=4,n.mutate({mutation:x.a,variables:{input:t}});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=N(r.a.mark((function e(t,n,a){var o,c,i,s,u,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.authAccount.contact,c=C(n,o),i=c.mergedData,s=c.contact,JSON.stringify(i)===JSON.stringify(s)){e.next=18;break}return e.prev=3,e.next=6,E(i);case 6:if(u=e.sent){e.next=9;break}return e.abrupt("return");case 9:return(l=p.i.MAP_CONTACT(t,u.data)).authAccount.hasContact=!0,e.next=13,a({variables:{user:l}});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t,n,a){return e.apply(this,arguments)}}();function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(u){return void n(u)}i.done?t(s):Promise.resolve(s).then(a,r)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){I(o,a,r,c,i,"next",e)}function i(e){I(o,a,r,c,i,"throw",e)}c(void 0)}))}}var D=new f.a,R=D.signal,A=g.b.div.withConfig({displayName:"redirect__StyledWrapper",componentId:"sc-152rre9-0"})([""," top:45%;left:50%;transform:translateX(-50%) translateY(-50%);"],{paddingTop:"1.5rem",paddingBottom:"1.5rem",flexDirection:"column",justifyContent:"center",alignItems:"center",display:"flex",position:"absolute"}),P=new s.a,L=function(){var e=S(r.a.mark((function e(t,n,a,o){var c,i,s,l,f,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("### REDIRECT PAGE"),c="/dashboard/",i="","undefined"!=typeof window&&window.localStorage.getItem("deepLinkUrl")&&(c=window.localStorage.getItem("deepLinkUrl"),i=c,window.localStorage.setItem("deepLinkUrl","")),console.log("### REDIRECT originalDeepLink:",i),!(s=P.isConsentOnly())){e.next=11;break}return console.log("### REDIRECT isConsentOnly:",s),window.localStorage.setItem("deepLinkUrl",""),document.location.href=i,e.abrupt("return");case 11:if(t!==d.b.CITIZEN){e.next=44;break}if(l=a&&a.tokenData&&{firstName:a.tokenData.firstName,middleName:a.tokenData.middleName,dob:a.tokenData.dob,lastName:a.tokenData.lastName,email:a.tokenData.email,isIP2:a.tokenData.isIP2},!n){e.next=25;break}if(!Object(u.a)(l)){e.next=19;break}return e.next=17,j(a,l,o);case 17:e.next=22;break;case 19:return window.localStorage.setItem("deepLinkUrl",i),Object(b.navigate)("/401"),e.abrupt("return");case 22:Object(b.navigate)(c),e.next=44;break;case 25:if(e.prev=25,l){e.next=28;break}throw new Error("No token data found");case 28:if(!Object(u.a)(l)){e.next=37;break}return e.next=31,Object(k.a)(l,c);case 31:f=e.sent,(m=p.i.MAP_CONTACT(a,f.data)).authAccount.hasContact=!0,o({variables:{user:m}}),e.next=39;break;case 37:void 0!==("undefined"==typeof window?"undefined":T(window))&&(window.localStorage.setItem("UpdateUserFromForm","yes"),window.localStorage.setItem("deepLinkUrl",i)),c="/401";case 39:c?Object(b.navigate)(c):Object(b.navigate)("/dashboard/"),e.next=44;break;case 42:e.prev=42,e.t0=e.catch(25);case 44:case"end":return e.stop()}}),e,null,[[25,42]])})));return function(t,n,a,r){return e.apply(this,arguments)}}();t.default=function(){var e=Object(o.useState)(void 0),t=e[0],n=e[1],a=Object(w.a)().data,s=(Object(w.a)().refetch,Object(o.useState)(!1)),u=s[0],l=s[1],f=Object(m.b)(v.a,{onCompleted:function(e){e.updateUser;void 0===t&&Object(p.f)(R).then((function(e){n(e)}))}}),g=f[0];f[1];Object(o.useEffect)((function(){if(t){var e=a;e.authAccount.contactType=t.result.contactType,t.result.hasContact&&(e=p.i.MAP_CONTACT(a,t)),g({variables:{user:e}}),L(t.result.contactType,t.result.hasContact,e,g)}}),[t]);var k=function(){var e=S(r.a.mark((function e(){var t,n,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getToken(P.token_names.access_token);case 2:return t=e.sent,e.next=5,P.getParsedToken(P.token_names.access_token);case 5:n=e.sent,(o=a)||(o=new d.a),c=p.i.MAP_TOKEN_DATA(o,n,t),g({variables:{user:c}});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e=window.location.href;function t(){return(t=S(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.processRedirect().then(S(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.isLoggedIn();case 3:e.sent?k():(console.log("### REDIRECT 236"),Object(b.navigate)("/")),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),console.log("### REDIRECT 241"),Object(b.navigate)("/");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).catch((function(e){throw console.error(e),e}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return e.includes("#")||(console.log("### REDIRECT 226"),Object(b.navigate)("/")),e.includes("?logout=true")?(l(!0),P.logout()):l(!1),function(){t.apply(this,arguments)}(),function(){return D.abort()}}),[]),c.a.createElement(i.b,{redirect:!0},c.a.createElement(A,null,c.a.createElement("p",null,u?"Signing you out...":"Signing you in..."),c.a.createElement(h.a,{spinnerType:"spinner--lg"})))}}}]);