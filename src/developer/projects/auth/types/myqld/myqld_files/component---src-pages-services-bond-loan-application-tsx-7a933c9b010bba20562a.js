(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{ApQX:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),o=a("UI3G"),i=a("jTD6");t.a=function(e){var t=e.defaultValue;return r.a.createElement(i.a,{funnelSchema:o.a,defaultValues:t,clientCache:e.clientCache})}},UI3G:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={name:"Bond loan application",service_id:"bond-loan-application",serviceType:"BondLoan",steps:[{stepCollection:"household",applicationName:"bond-loan"},{stepCollection:"your_details",applicationName:"bond-loan"},{stepCollection:"tenants-information",applicationName:"bond-loan"},{stepCollection:"rental-property-information",applicationName:"bond-loan"},{stepCollection:"rental-agent",applicationName:"bond-loan"}]}},Vn16:function(e,t,a){"use strict";a("91GP"),a("INYr");t.a=function(e,t){var a=e;if(a.formData){var n=a.formData.findIndex((function(e){return"Your details"===e.stepName})),r={"person-dateOfBirth":t.dob,"person-firstName":t.firstName,"person-email":t.email,"person-lastName":t.lastName,"person-middleName":t.middleName};return a.formData[n].data=Object.assign({},a.formData[n].data,r),a}throw new Error("No form data")}},hGIZ:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));a("VRzm"),a("Btvt");var n=a("o0o1"),r=a.n(n),o=(a("ls82"),a("lTCR")),i=a.n(o),c=a("C2HB");function s(e,t,a,n,r,o,i){try{var c=e[o](i),s=c.value}catch(u){return void a(u)}c.done?t(s):Promise.resolve(s).then(n,r)}function u(){var e=function(e,t){t||(t=e.slice(0));return e.raw=t,e}(['\n  mutation CreateRequestDraft($input: CreateRequestDraftInput) {\n    result: ServiceRequestDraft(input: $input)\n      @rest(\n        type: "ServiceRequestDraft"\n        path: "citizen/servicerequestdrafts"\n        method: "POST"\n      ) {\n      hasServiceRequestDraft\n\n      serviceRequestDraft @type(name: "test") {\n        SK\n        service\n        content\n        submitted\n        expires\n        createdAt\n        updatedAt\n      }\n    }\n  }\n']);return u=function(){return e},e}var l=i()(u()),f=function(){var e,t=(e=r.a.mark((function e(t,a){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(c.a)(),e.next=3,n.mutate({mutation:l,variables:{input:{service:t}},context:{fetchOptions:{signal:a}}});case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){s(o,n,r,i,c,"next",e)}function c(e){s(o,n,r,i,c,"throw",e)}i(void 0)}))});return function(e,a){return t.apply(this,arguments)}}()},wQ9A:function(e,t,a){"use strict";a.r(t);a("rE2o"),a("ioFf"),a("OG14");var n=a("q1tI"),r=a.n(n),o=a("vqTq"),i=a("Udzp"),c=a("ApQX"),s=a("scg8"),u=a("N9+v"),l=a("CLrh"),f=a("YCiF"),d=a("vkDE"),p=a("Wbzz"),v=a("cr+I"),m=a("83ZH"),h=a("hGIZ"),b=a("iBx0"),D=a("q8UK"),O=a.n(D),S=a("5LZK"),E=a("Vn16"),R=a("rP6D");var N=(new O.a).signal,q=[{link:"/dashboard",text:"My dashboard"},{text:"Bond loan"}];t.default=function(e){var t=Object(n.useState)(!0),a=t[0],D=t[1],O=Object(n.useState)(void 0),w=O[0],j=O[1],C=Object(n.useState)(Object(f.a)().data),g=C[0],y=C[1],I=Object(n.useState)(!1),x=I[0],B=I[1];Object(n.useEffect)((function(){var t=location.search&&Object(v.parse)(location.search)||{};t&&t.id?(w||e.location.state&&e.location.state.resetting||Object(m.b)(t.id,N).then((function(e){if(!1===e.result.hasServiceRequestDraft)throw new Error("Service request draft doesn't exist for id: "+t.id);var a=JSON.parse(e.result.serviceRequestDraft[0].content);if(null==a);else if(void 0!==a.formData){var n=a.formData;n&&n.forEach((function(e){e.data=d.a.convertBooleanToString(e.data)}))}if(a){var r=e.result.serviceRequestDraft[0].SRReference;r&&(a.SRReference=r)}if(g&&g.tokenData&&a)try{var o=Object(E.a)(a,g.tokenData);j(o)}catch(i){j(a)}else a&&j(a);D(!1)})),e.location.state&&e.location.state.resetting&&(Object(p.navigate)(null,{state:{resetting:!1}}),D(!1))):Object(h.a)(S.ServiceTypes.BONDLOAN,N).then((function(e){var t=Object(b.a)(e.result.serviceRequestDraft.SK);Object(p.navigate)("?id="+t),D(!1)}))}),[e.location.search]);var T=function(e){y(e),B(l.i.IS_USER_REGISTERED(e))};if(!a&&(g.authAccount.isAuthenticated||x)){return r.a.createElement(o.b,{metaTitle:"Bond loan",onCacheLoaded:T},r.a.createElement(i.a,{title:"Bond loan",breadcrumbs:q},g.tokenData.isIP2?r.a.createElement(c.a,{defaultValue:w,clientCache:g}):r.a.createElement(R.a,{context:"bond-loan"})))}return r.a.createElement(o.b,{metaTitle:"Dashboard",onCacheLoaded:T},r.a.createElement(s.StyledWrapper,null,r.a.createElement("p",null,"Loading..."),r.a.createElement(u.a,{spinnerType:"spinner--lg"})))}}}]);