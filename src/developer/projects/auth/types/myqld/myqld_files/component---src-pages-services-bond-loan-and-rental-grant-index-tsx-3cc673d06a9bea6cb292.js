(window.webpackJsonp=window.webpackJsonp||[]).push([[33,28,39],{"1cW5":function(e,t,a){"use strict";a.r(t);a("rE2o"),a("ioFf"),a("pIFo"),a("91GP");var n=a("q1tI"),r=a.n(n),o=a("vOnD"),i=a("vqTq"),c=a("Udzp"),l=a("BnTh"),s=a("N9+v"),u=a("YCiF"),d=a("ttZb"),m=a("scg8"),p=a("kytN"),b=a("Wbzz"),f=a("0+lk"),g=a("TJ1L"),v=a("Qb9D"),h=a("UD5t"),y=a("C2HB"),w=a("3mua"),E=a("5LZK"),k=a("iBx0"),O=a("vBp4"),N=a("rP6D"),j=a("IGjA"),x=a("eJi6");o.b.section.withConfig({displayName:"bond-loan-and-rental-grant__ProfileSection",componentId:"a8t25b-0"})({});var C=[{link:"/dashboard",text:"Dashboard"},{text:"Bond Loan and Rental Grant"}],S=o.b.img.withConfig({displayName:"bond-loan-and-rental-grant__StyledImage",componentId:"a8t25b-1"})(["max-height:none !important;margin-top:0 !important;"]),T=o.b.div.withConfig({displayName:"bond-loan-and-rental-grant__StyledContainer",componentId:"a8t25b-2"})(["background:#fff;border-left:solid 4px #290a29;",""],{marginTop:"1.5rem",marginBottom:"1.5rem",padding:"1rem"}),_=Object(o.b)("p").withConfig({displayName:"bond-loan-and-rental-grant___StyledP",componentId:"a8t25b-3"})({fontSize:"1.125rem"}),I=Object(o.b)("a").withConfig({displayName:"bond-loan-and-rental-grant___StyledA",componentId:"a8t25b-4"})({display:"block",fontSize:"1.125rem",paddingTop:"1rem"}),D=Object(o.b)("div").withConfig({displayName:"bond-loan-and-rental-grant___StyledDiv",componentId:"a8t25b-5"})({marginTop:"0.75rem"}),R=Object(o.b)(h.a).withConfig({displayName:"bond-loan-and-rental-grant___StyledButton",componentId:"a8t25b-6"})({maxWidth:"24rem"}),A=Object(o.b)(h.a).withConfig({displayName:"bond-loan-and-rental-grant___StyledButton2",componentId:"a8t25b-7"})({maxWidth:"24rem"}),L=Object(o.b)("div").withConfig({displayName:"bond-loan-and-rental-grant___StyledDiv2",componentId:"a8t25b-8"})({marginTop:"1.5rem"}),P=Object(o.b)(h.a).withConfig({displayName:"bond-loan-and-rental-grant___StyledButton3",componentId:"a8t25b-9"})({maxWidth:"24rem"});t.default=function(e){var t=e.testCache,a=Object(d.c)(l.b,{client:Object(y.a)(),fetchPolicy:"cache-first"}),o=a.loading,h=(a.data,Object(d.c)(w.a,{client:Object(y.a)(),variables:{service:E.ServiceTypes.BONDLOANANDRENTALGRANT,submitted:!1},fetchPolicy:"network-only"})),B=h.loading,U=h.data,W=Object(n.useState)(!1),G=W[0],q=W[1],z=Object(n.useState)([]),J=z[0],F=z[1],K=Object(n.useState)(Object(u.a)().data),M=K[0],Z=K[1],Y=function(e){Object(x.a)(e.tokenData)?(Z(e),q(p.a.IS_USER_REGISTERED(e))):Object(b.navigate)("/401")};if(Object(n.useEffect)((function(){t&&(Z(t),Y(t))}),[]),Object(n.useEffect)((function(){if(!B){var e=U.result.serviceRequestDraft.map((function(e){var t=JSON.parse(e.content),a=Object(k.a)(e.SK);return Object.assign({},e,{id:a,content:t})}));F(e)}}),[U]),M.authAccount.isAuthenticated&&G){return r.a.createElement(i.b,{metaTitle:"Applications",onCacheLoaded:Y},r.a.createElement(c.a,{title:"Apply for a Bond Loan and Rental Grant",breadcrumbs:C},r.a.createElement("div",{className:"au-grid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-lg-8"},M.tokenData.isIP2?r.a.createElement("span",null,o?r.a.createElement("div",{className:"flex flex-col"},"Please wait while we fetch your applications.",r.a.createElement(s.a,{spinnerType:"spinner--lg"})):r.a.createElement("span",null,r.a.createElement(_,null,"Bond loan is an interest free loan to cover the rental Bond and Rental Grant is an amount equal to 2 weeks rent for the property you want to rent."),r.a.createElement(I,{href:Object(O.a)(),title:"This link is to an external website."},"Check your eligibility for a Bond Loan or Rental Grant",r.a.createElement(S,{src:"/images/external-link-alt-solid.svg",alt:"external link icon",className:"inline w-3 ml-1 mb-1 pb-2"})),r.a.createElement(T,null,r.a.createElement("p",null,"To apply you will need:"),r.a.createElement("ol",{className:"ml-10 my-3",style:{listStyle:"decimal"}},r.a.createElement("li",null,"your contact details"),r.a.createElement("li",null,"your household details"),r.a.createElement("li",null,"evidence to verify your income"),r.a.createElement("li",null,"evidence to verify your residency status"),r.a.createElement("li",null,"your lease and property details"),r.a.createElement("li",null,"details of your rental agent/lessor")),r.a.createElement("p",null,"Your application will take about 15 minutes to complete.")),r.a.createElement("div",{className:"mb-5"},r.a.createElement(j.a,null)),J&&J.length>0?r.a.createElement(f.a,{as:"info","data-testid":"form-info",className:"mt-6"},r.a.createElement(g.d,null,"We found a Bond Loan and Rental Grant application you had previously started."),r.a.createElement("p",null,"Would you like to continue this previous application, or start a new one?"),r.a.createElement(D,null,r.a.createElement(R,{block:!0,"data-testid":"continue-existing-application",onClick:function(){Object(b.navigate)("/services/"+J[0].service.toLowerCase().replace(/ /g,"-")+"/?id="+J[0].id)}},"Continue existing applications",r.a.createElement(v.b,{src:"/images/button-right-dark.svg",width:"7",height:"12",alt:"right pointing arrow"})),r.a.createElement(A,{block:!0,secondary:!0,"data-testid":"start-new-application","data-testid-custom":"start-new-application",onClick:function(){localStorage.setItem("easyApply","[]"),Object(b.navigate)("/services/"+J[0].service.toLowerCase().replace(/ /g,"-")+"/?id="+J[0].id,{state:{resetting:!0}})}},"Start a new application",r.a.createElement(v.b,{src:"/images/button-right-dark.svg",width:"7",height:"12",alt:"right pointing arrow"})))):r.a.createElement(L,null,r.a.createElement(P,{block:!0,"data-testid":"continue-to-application","data-testid-custom":"start-new-application",onClick:function(){Object(b.navigate)("/services/bond-loan-and-rental-grant-application")}},"Start a new application",r.a.createElement(v.b,{src:"/images/button-right-dark.svg",width:"7",height:"12",alt:"right pointing arrow"}))))):r.a.createElement(N.a,{context:"bond-loan-rental-grant"}))))))}return r.a.createElement(i.b,{metaTitle:"Dashboard",onCacheLoaded:Y},r.a.createElement(m.StyledWrapper,null,r.a.createElement("p",null,"Loading..."),r.a.createElement(s.a,{spinnerType:"spinner--lg"})))}},scg8:function(e,t,a){"use strict";a.r(t),a.d(t,"StyledWrapper",(function(){return R}));a("rE2o"),a("ioFf"),a("VRzm"),a("Btvt"),a("Z2Ku"),a("L9s1");var n=a("o0o1"),r=a.n(n),o=(a("ls82"),a("q1tI")),i=a.n(o),c=a("vqTq"),l=a("asXk"),s=a("eJi6"),u=a("q8UK"),d=a.n(u),m=a("7LEp"),p=a("CLrh"),b=a("ttZb"),f=a("Wbzz"),g=a("bjRM"),v=a("YCiF"),h=a("vOnD"),y=a("N9+v"),w=a("gxW4"),E=(a("rGqo"),a("yt8O"),a("RW0V"),a("91GP"),a("C2HB")),k=a("mTwe");function O(e,t,a,n,r,o,i){try{var c=e[o](i),l=c.value}catch(s){return void a(s)}c.done?t(l):Promise.resolve(l).then(n,r)}function N(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){O(o,n,r,i,c,"next",e)}function c(e){O(o,n,r,i,c,"throw",e)}i(void 0)}))}}var j=function(e,t){var a={firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,dob:e.dob,email:e.email},n={firstName:t.firstName||"",middleName:t.middleName||"",lastName:t.lastName||"",dob:t.dob||"",email:t.email||""},r=Object.assign({},t,n);return{mergedData:Object.assign({},r,a),contact:r}},x=function(){var e=N(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(E.a)(),Object.keys(t).forEach((function(e){return null===t[e]&&delete t[e]})),e.next=4,a.mutate({mutation:k.a,variables:{input:t}});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=N(r.a.mark((function e(t,a,n){var o,i,c,l,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.authAccount.contact,i=j(a,o),c=i.mergedData,l=i.contact,JSON.stringify(c)===JSON.stringify(l)){e.next=18;break}return e.prev=3,e.next=6,x(c);case 6:if(s=e.sent){e.next=9;break}return e.abrupt("return");case 9:return(u=p.i.MAP_CONTACT(t,s.data)).authAccount.hasContact=!0,e.next=13,n({variables:{user:u}});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t,a,n){return e.apply(this,arguments)}}();function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,a,n,r,o,i){try{var c=e[o](i),l=c.value}catch(s){return void a(s)}c.done?t(l):Promise.resolve(l).then(n,r)}function _(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){T(o,n,r,i,c,"next",e)}function c(e){T(o,n,r,i,c,"throw",e)}i(void 0)}))}}var I=new d.a,D=I.signal,R=h.b.div.withConfig({displayName:"redirect__StyledWrapper",componentId:"sc-152rre9-0"})([""," top:45%;left:50%;transform:translateX(-50%) translateY(-50%);"],{paddingTop:"1.5rem",paddingBottom:"1.5rem",flexDirection:"column",justifyContent:"center",alignItems:"center",display:"flex",position:"absolute"}),A=new l.a,L=function(){var e=_(r.a.mark((function e(t,a,n,o){var i,c,l,u,d,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("### REDIRECT PAGE"),i="/dashboard/",c="","undefined"!=typeof window&&window.localStorage.getItem("deepLinkUrl")&&(i=window.localStorage.getItem("deepLinkUrl"),c=i,window.localStorage.setItem("deepLinkUrl","")),console.log("### REDIRECT originalDeepLink:",c),!(l=A.isConsentOnly())){e.next=11;break}return console.log("### REDIRECT isConsentOnly:",l),window.localStorage.setItem("deepLinkUrl",""),document.location.href=c,e.abrupt("return");case 11:if(t!==m.b.CITIZEN){e.next=44;break}if(u=n&&n.tokenData&&{firstName:n.tokenData.firstName,middleName:n.tokenData.middleName,dob:n.tokenData.dob,lastName:n.tokenData.lastName,email:n.tokenData.email,isIP2:n.tokenData.isIP2},!a){e.next=25;break}if(!Object(s.a)(u)){e.next=19;break}return e.next=17,C(n,u,o);case 17:e.next=22;break;case 19:return window.localStorage.setItem("deepLinkUrl",c),Object(f.navigate)("/401"),e.abrupt("return");case 22:Object(f.navigate)(i),e.next=44;break;case 25:if(e.prev=25,u){e.next=28;break}throw new Error("No token data found");case 28:if(!Object(s.a)(u)){e.next=37;break}return e.next=31,Object(w.a)(u,i);case 31:d=e.sent,(b=p.i.MAP_CONTACT(n,d.data)).authAccount.hasContact=!0,o({variables:{user:b}}),e.next=39;break;case 37:void 0!==("undefined"==typeof window?"undefined":S(window))&&(window.localStorage.setItem("UpdateUserFromForm","yes"),window.localStorage.setItem("deepLinkUrl",c)),i="/401";case 39:i?Object(f.navigate)(i):Object(f.navigate)("/dashboard/"),e.next=44;break;case 42:e.prev=42,e.t0=e.catch(25);case 44:case"end":return e.stop()}}),e,null,[[25,42]])})));return function(t,a,n,r){return e.apply(this,arguments)}}();t.default=function(){var e=Object(o.useState)(void 0),t=e[0],a=e[1],n=Object(v.a)().data,l=(Object(v.a)().refetch,Object(o.useState)(!1)),s=l[0],u=l[1],d=Object(b.b)(g.a,{onCompleted:function(e){e.updateUser;void 0===t&&Object(p.f)(D).then((function(e){a(e)}))}}),h=d[0];d[1];Object(o.useEffect)((function(){if(t){var e=n;e.authAccount.contactType=t.result.contactType,t.result.hasContact&&(e=p.i.MAP_CONTACT(n,t)),h({variables:{user:e}}),L(t.result.contactType,t.result.hasContact,e,h)}}),[t]);var w=function(){var e=_(r.a.mark((function e(){var t,a,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getToken(A.token_names.access_token);case 2:return t=e.sent,e.next=5,A.getParsedToken(A.token_names.access_token);case 5:a=e.sent,(o=n)||(o=new m.a),i=p.i.MAP_TOKEN_DATA(o,a,t),h({variables:{user:i}});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e=window.location.href;function t(){return(t=_(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.processRedirect().then(_(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.isLoggedIn();case 3:e.sent?w():(console.log("### REDIRECT 236"),Object(f.navigate)("/")),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),console.log("### REDIRECT 241"),Object(f.navigate)("/");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).catch((function(e){throw console.error(e),e}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return e.includes("#")||(console.log("### REDIRECT 226"),Object(f.navigate)("/")),e.includes("?logout=true")?(u(!0),A.logout()):u(!1),function(){t.apply(this,arguments)}(),function(){return I.abort()}}),[]),i.a.createElement(c.b,{redirect:!0},i.a.createElement(R,null,i.a.createElement("p",null,s?"Signing you out...":"Signing you in..."),i.a.createElement(y.a,{spinnerType:"spinner--lg"})))}}}]);