(window.webpackJsonp=window.webpackJsonp||[]).push([[35,28,39],{"74sG":function(e,t,n){"use strict";n.r(t);n("rE2o"),n("ioFf"),n("pIFo"),n("91GP");var a=n("q1tI"),o=n.n(a),r=n("vOnD"),i=n("vqTq"),c=n("Udzp"),l=n("BnTh"),s=n("N9+v"),u=n("YCiF"),d=n("ttZb"),m=n("scg8"),p=n("Qb9D"),f=n("kytN"),b=n("Wbzz"),v=n("0+lk"),g=n("TJ1L"),y=n("UD5t"),h=n("C2HB"),w=n("3mua"),E=n("5LZK"),k=n("iBx0"),O=n("vBp4"),N=n("rP6D"),j=n("IGjA"),x=n("eJi6");r.b.section.withConfig({displayName:"bond-loan__ProfileSection",componentId:"sc-132y6vf-0"})({});var C=[{link:"/dashboard",text:"Dashboard"},{text:"Bond Loan"}],S=r.b.img.withConfig({displayName:"bond-loan__StyledImage",componentId:"sc-132y6vf-1"})(["max-height:none !important;margin-top:0 !important;"]),_=r.b.div.withConfig({displayName:"bond-loan__StyledContainer",componentId:"sc-132y6vf-2"})(["background:#fff;border-left:solid 4px #290a29;",""],{marginTop:"1.5rem",marginBottom:"1.5rem",padding:"1rem",paddingTop:"0.25rem"}),I=Object(r.b)(_).withConfig({displayName:"bond-loan___StyledStyledContainer",componentId:"sc-132y6vf-3"})({marginBottom:"0"}),T=Object(r.b)("p").withConfig({displayName:"bond-loan___StyledP",componentId:"sc-132y6vf-4"})({fontSize:"1.125rem"}),D=Object(r.b)("a").withConfig({displayName:"bond-loan___StyledA",componentId:"sc-132y6vf-5"})({display:"block",fontSize:"1.125rem",paddingTop:"1rem"}),L=Object(r.b)("div").withConfig({displayName:"bond-loan___StyledDiv",componentId:"sc-132y6vf-6"})({marginTop:"0.75rem"}),A=Object(r.b)(y.a).withConfig({displayName:"bond-loan___StyledButton",componentId:"sc-132y6vf-7"})({maxWidth:"24rem"}),P=Object(r.b)(y.a).withConfig({displayName:"bond-loan___StyledButton2",componentId:"sc-132y6vf-8"})({maxWidth:"24rem"}),R=Object(r.b)("div").withConfig({displayName:"bond-loan___StyledDiv2",componentId:"sc-132y6vf-9"})({marginTop:"0.75rem"}),B=Object(r.b)(y.a).withConfig({displayName:"bond-loan___StyledButton3",componentId:"sc-132y6vf-10"})({maxWidth:"24rem"});t.default=function(e){var t=e.testCache,n=Object(d.c)(l.b,{client:Object(h.a)(),fetchPolicy:"cache-first"}),r=n.loading,y=(n.data,Object(d.c)(w.a,{client:Object(h.a)(),variables:{service:E.ServiceTypes.BONDLOAN,submitted:!1},fetchPolicy:"network-only"})),_=y.loading,U=y.data,W=Object(a.useState)([]),q=W[0],z=W[1],J=Object(a.useState)(!1),F=J[0],G=J[1],K=Object(a.useState)(Object(u.a)().data),M=K[0],Z=K[1],Y=function(e){Object(x.a)(e.tokenData)?(Z(e),G(f.a.IS_USER_REGISTERED(e))):Object(b.navigate)("/401")};if(Object(a.useEffect)((function(){t&&(Z(t),Y(t))}),[]),Object(a.useEffect)((function(){if(!_){var e=U.result.serviceRequestDraft.map((function(e){var t=JSON.parse(e.content),n=Object(k.a)(e.SK);return Object.assign({},e,{id:n,content:t})}));z(e)}}),[U]),M.authAccount.isAuthenticated&&F){return o.a.createElement(i.b,{metaTitle:"Applications",onCacheLoaded:Y},o.a.createElement(c.a,{title:"Apply for a Bond Loan",breadcrumbs:C},o.a.createElement("div",{className:"au-grid showLists"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-12 col-lg-8"},M.tokenData.isIP2?o.a.createElement("span",null,r||_?o.a.createElement("div",{className:"flex flex-col"},"Please wait while we fetch your applications.",o.a.createElement(s.a,{spinnerType:"spinner--lg"})):o.a.createElement("span",null,o.a.createElement(T,null,"A Bond Loan is an interest-free loan to cover the rental bond when you move into private rental accommodation."),o.a.createElement(D,{href:Object(O.a)(),title:"This link is to an external website."},"Check your eligibility for a Bond Loan",o.a.createElement(S,{src:"../../../images/external-link-alt-solid.svg",alt:"external link icon",className:"inline w-3 ml-1 mb-1 pb-2"})),o.a.createElement(I,null,o.a.createElement("p",null,"To apply you will need:"),o.a.createElement("ol",{className:"ml-10 my-3",style:{listStyle:"decimal"}},o.a.createElement("li",null,"your contact details"),o.a.createElement("li",null,"your household details"),o.a.createElement("li",null,"evidence to verify your income"),o.a.createElement("li",null,"evidence to verify your residency status"),o.a.createElement("li",null,"your lease and property details"),o.a.createElement("li",null,"details of your rental agent/lessor")),o.a.createElement("p",null,"Your application will take about 15 minutes to complete.")),o.a.createElement("div",{className:"mb-5"},o.a.createElement(j.a,null)),q&&q.length>0?o.a.createElement(v.a,{as:"info","data-testid":"form-info",className:"mt-6"},o.a.createElement(g.d,null,"We found a Bond Loan application you had previously started."),o.a.createElement("p",null,"Would you like to continue this previous application, or start a new one?"),o.a.createElement(L,null,o.a.createElement(A,{block:!0,"data-testid":"continue-existing-application",onClick:function(){Object(b.navigate)("/services/"+q[0].service.toLowerCase().replace(/ /g,"-")+"/?id="+q[0].id)}},"Continue existing application",o.a.createElement(p.b,{src:"/images/button-right-dark.svg",width:"7",height:"12",alt:"right pointing arrow"})),o.a.createElement(P,{block:!0,secondary:!0,"data-testid":"start-new-application","data-testid-custom":"start-new-application",onClick:function(){Object(b.navigate)("/services/"+q[0].service.toLowerCase().replace(/ /g,"-")+"/?id="+q[0].id,{state:{resetting:!0}})}},"Start a new application",o.a.createElement(p.b,{src:"/images/button-right-dark.svg",width:"7",height:"12",alt:"right pointing arrow"})))):o.a.createElement(R,null,o.a.createElement(B,{block:!0,"data-testid":"continue-to-application","data-testid-custom":"start-new-application",onClick:function(){localStorage.setItem("easyApply","[]"),Object(b.navigate)("/services/bond-loan-application")}},"Start a new application",o.a.createElement(p.b,{src:"/images/button-right-dark.svg",width:"7",height:"12",alt:"right pointing arrow"}))))):o.a.createElement(N.a,{context:"bond-loan"}))))))}return o.a.createElement(i.b,{metaTitle:"Dashboard",onCacheLoaded:Y},o.a.createElement(m.StyledWrapper,null,o.a.createElement("p",null,"Loading..."),o.a.createElement(s.a,{spinnerType:"spinner--lg"})))}},scg8:function(e,t,n){"use strict";n.r(t),n.d(t,"StyledWrapper",(function(){return L}));n("rE2o"),n("ioFf"),n("VRzm"),n("Btvt"),n("Z2Ku"),n("L9s1");var a=n("o0o1"),o=n.n(a),r=(n("ls82"),n("q1tI")),i=n.n(r),c=n("vqTq"),l=n("asXk"),s=n("eJi6"),u=n("q8UK"),d=n.n(u),m=n("7LEp"),p=n("CLrh"),f=n("ttZb"),b=n("Wbzz"),v=n("bjRM"),g=n("YCiF"),y=n("vOnD"),h=n("N9+v"),w=n("gxW4"),E=(n("rGqo"),n("yt8O"),n("RW0V"),n("91GP"),n("C2HB")),k=n("mTwe");function O(e,t,n,a,o,r,i){try{var c=e[r](i),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(a,o)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function i(e){O(r,a,o,i,c,"next",e)}function c(e){O(r,a,o,i,c,"throw",e)}i(void 0)}))}}var j=function(e,t){var n={firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,dob:e.dob,email:e.email},a={firstName:t.firstName||"",middleName:t.middleName||"",lastName:t.lastName||"",dob:t.dob||"",email:t.email||""},o=Object.assign({},t,a);return{mergedData:Object.assign({},o,n),contact:o}},x=function(){var e=N(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(E.a)(),Object.keys(t).forEach((function(e){return null===t[e]&&delete t[e]})),e.next=4,n.mutate({mutation:k.a,variables:{input:t}});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=N(o.a.mark((function e(t,n,a){var r,i,c,l,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.authAccount.contact,i=j(n,r),c=i.mergedData,l=i.contact,JSON.stringify(c)===JSON.stringify(l)){e.next=18;break}return e.prev=3,e.next=6,x(c);case 6:if(s=e.sent){e.next=9;break}return e.abrupt("return");case 9:return(u=p.i.MAP_CONTACT(t,s.data)).authAccount.hasContact=!0,e.next=13,a({variables:{user:u}});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t,n,a){return e.apply(this,arguments)}}();function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,n,a,o,r,i){try{var c=e[r](i),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(a,o)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function i(e){_(r,a,o,i,c,"next",e)}function c(e){_(r,a,o,i,c,"throw",e)}i(void 0)}))}}var T=new d.a,D=T.signal,L=y.b.div.withConfig({displayName:"redirect__StyledWrapper",componentId:"sc-152rre9-0"})([""," top:45%;left:50%;transform:translateX(-50%) translateY(-50%);"],{paddingTop:"1.5rem",paddingBottom:"1.5rem",flexDirection:"column",justifyContent:"center",alignItems:"center",display:"flex",position:"absolute"}),A=new l.a,P=function(){var e=I(o.a.mark((function e(t,n,a,r){var i,c,l,u,d,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("### REDIRECT PAGE"),i="/dashboard/",c="","undefined"!=typeof window&&window.localStorage.getItem("deepLinkUrl")&&(i=window.localStorage.getItem("deepLinkUrl"),c=i,window.localStorage.setItem("deepLinkUrl","")),console.log("### REDIRECT originalDeepLink:",c),!(l=A.isConsentOnly())){e.next=11;break}return console.log("### REDIRECT isConsentOnly:",l),window.localStorage.setItem("deepLinkUrl",""),document.location.href=c,e.abrupt("return");case 11:if(t!==m.b.CITIZEN){e.next=44;break}if(u=a&&a.tokenData&&{firstName:a.tokenData.firstName,middleName:a.tokenData.middleName,dob:a.tokenData.dob,lastName:a.tokenData.lastName,email:a.tokenData.email,isIP2:a.tokenData.isIP2},!n){e.next=25;break}if(!Object(s.a)(u)){e.next=19;break}return e.next=17,C(a,u,r);case 17:e.next=22;break;case 19:return window.localStorage.setItem("deepLinkUrl",c),Object(b.navigate)("/401"),e.abrupt("return");case 22:Object(b.navigate)(i),e.next=44;break;case 25:if(e.prev=25,u){e.next=28;break}throw new Error("No token data found");case 28:if(!Object(s.a)(u)){e.next=37;break}return e.next=31,Object(w.a)(u,i);case 31:d=e.sent,(f=p.i.MAP_CONTACT(a,d.data)).authAccount.hasContact=!0,r({variables:{user:f}}),e.next=39;break;case 37:void 0!==("undefined"==typeof window?"undefined":S(window))&&(window.localStorage.setItem("UpdateUserFromForm","yes"),window.localStorage.setItem("deepLinkUrl",c)),i="/401";case 39:i?Object(b.navigate)(i):Object(b.navigate)("/dashboard/"),e.next=44;break;case 42:e.prev=42,e.t0=e.catch(25);case 44:case"end":return e.stop()}}),e,null,[[25,42]])})));return function(t,n,a,o){return e.apply(this,arguments)}}();t.default=function(){var e=Object(r.useState)(void 0),t=e[0],n=e[1],a=Object(g.a)().data,l=(Object(g.a)().refetch,Object(r.useState)(!1)),s=l[0],u=l[1],d=Object(f.b)(v.a,{onCompleted:function(e){e.updateUser;void 0===t&&Object(p.f)(D).then((function(e){n(e)}))}}),y=d[0];d[1];Object(r.useEffect)((function(){if(t){var e=a;e.authAccount.contactType=t.result.contactType,t.result.hasContact&&(e=p.i.MAP_CONTACT(a,t)),y({variables:{user:e}}),P(t.result.contactType,t.result.hasContact,e,y)}}),[t]);var w=function(){var e=I(o.a.mark((function e(){var t,n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getToken(A.token_names.access_token);case 2:return t=e.sent,e.next=5,A.getParsedToken(A.token_names.access_token);case 5:n=e.sent,(r=a)||(r=new m.a),i=p.i.MAP_TOKEN_DATA(r,n,t),y({variables:{user:i}});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=window.location.href;function t(){return(t=I(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.processRedirect().then(I(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.isLoggedIn();case 3:e.sent?w():(console.log("### REDIRECT 236"),Object(b.navigate)("/")),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),console.log("### REDIRECT 241"),Object(b.navigate)("/");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).catch((function(e){throw console.error(e),e}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return e.includes("#")||(console.log("### REDIRECT 226"),Object(b.navigate)("/")),e.includes("?logout=true")?(u(!0),A.logout()):u(!1),function(){t.apply(this,arguments)}(),function(){return T.abort()}}),[]),i.a.createElement(c.b,{redirect:!0},i.a.createElement(L,null,i.a.createElement("p",null,s?"Signing you out...":"Signing you in..."),i.a.createElement(h.a,{spinnerType:"spinner--lg"})))}}}]);