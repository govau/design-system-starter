(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"4o8R":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),o=a("vlmH"),i="https://www.hpw.qld.gov.au/about/information-privacy";t.a=function(){return r.a.createElement("p",null,r.a.createElement("a",{href:i,target:"_blank",rel:"noreferrer",title:"This link is to the external website "+i+"."},"Learn about the Department’s privacy policy.",r.a.createElement(o.a.ExternalLink,{className:"inline"})))}},"9y+9":function(e,t,a){"use strict";t.a=function(){return"/consent?return_url="+window.location.origin+"/dashboard"}},DCqK:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),o=a("5Qm2"),i=a("4W+V"),l=a("z1st"),s=a("bWyO"),c=a("fFXF"),u=a("4o8R"),d=function(e){e.preventDefault()},m=function(e){return r.a.createElement("span",null,e&&e.linkText?r.a.createElement("a",{href:"#",onClick:d},e.linkText):r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Your privacy")),r.a.createElement("p",null,"Read our"," ",r.a.createElement("a",{href:"#",onClick:d},"privacy statement")," ","to find out how we manage your personal information.")))},p=function(e){return r.a.createElement(s.a,{headerText:"myQld Privacy",modalTriggerComponent:m(e),closeButtonLabel:"Return to profile"},r.a.createElement("p",null,r.a.createElement("strong",null,"myQld profile")),r.a.createElement("p",null,"The Department of Communities, Housing and Digital Economy (the Department) is collecting personal information through this myQld portal for the purpose of creating or updating your myQld profile. This is so we can make your future interactions with the Queensland Government simpler and easier. The aim, with your consent, is to re-use information that you have already provided us so that you do not need to give that same information to us again."),r.a.createElement(c.a,null),r.a.createElement("p",null,"It is important to keep your myQld profile information up to date and you should periodically review and update information where required. Some, but not all, of your personal details can be changed through your myQld profile page. To change your name, date of birth or email address, you must go back to your QGov account and make the changes there (and you will also need to re-verify your identity through QGov at that time)."),r.a.createElement(u.a,null))},f={sections:[{name:"About you",fields:[{component:"SELECT",name:"title",label:"Title",attributeName:i.a.PERSON_TITLE,options:[{value:"",label:""},{value:"Ms",label:"Ms"},{value:"Mr",label:"Mr"},{value:"Mrs",label:"Mrs"}],testId:"title"},{component:"TEXT_INPUT",name:"firstName",disabled:!0,label:"First name",validate:{required:"First name is required",maxLength:{value:30,message:"First Name can only be 30 characters."}},testId:"first-name",hintText:Object(l.a)()},{component:"TEXT_INPUT",name:"middleName",disabled:!0,label:"Middle name/s",validate:{maxLength:{value:25,message:"Middle Name can only be 25 characters."}},testId:"middle-name",hintText:Object(l.a)()},{component:"TEXT_INPUT",name:"lastName",disabled:!0,label:"Last name",validate:{required:"Last name is required",maxLength:{value:30,message:"Last Name can only be 30 characters."}},testId:"last-name",hintText:Object(l.a)()},{component:"DATE_INPUT",name:"dob",disabled:!0,label:"Date of birth",hintText:Object(l.a)({hint:"You can update this in your",url:"https://identity.qld.gov.au/help/faq.html#howDoIChangeMyDateOfBirth"}),validate:{required:"Date of birth is required"},testId:"date-of-birth"},{component:"RADIO_INPUT_GROUP",name:"gender",label:"Gender",validate:{required:"Gender is required"},options:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Other",value:"X"}],testId:"gender"},{component:"TEXT_INPUT",hintText:"Enter your gender description",name:"genderOther",attributeName:i.a.PERSON_GENDEROTHER,dependsOn:[{field:"gender",opt:"equal",value:["X"]}],testId:"gender-description"}]},{name:"Address details",fields:[{component:"ADDRESS",name:"residentialAddress",label:"Residential address",placeholder:"Enter a location",validate:{required:"Residential address is required"},testId:"residential-address"},{component:"CHECKBOX",name:"postalDifferent",id:"postalDifferent",label:"Postal address is different to residential address",testId:"cb-postal"},{component:"ADDRESS",name:"postalAddress",label:"Postal address",placeholder:"Enter a location",validate:{required:"Postal address is required"},dependsOn:[{field:"postalDifferent",opt:"equal",value:[!0]}],testId:"postal-address"}]},{name:"Contact details",fields:[{component:"TEXT_INPUT",name:"homePhone",label:"Home phone",testId:"home-phone",type:"tel",validate:{customValidation:[{type:"AUS_PHONE",message:"Phone should be a valid phone number format e.g. (07) 1122 3344"}]}},{component:"TEXT_INPUT",name:"email",disabled:!0,label:"Email",validate:{required:"Email is required",customValidation:[{type:"EMAIL",message:"Email is not a valid email"}]},testId:"email",type:"email",hintText:Object(l.a)()},{component:"TEXT_INPUT",name:"mobile",label:"Mobile",validate:{required:"Mobile is required",customValidation:[{type:"AUS_PHONE",message:"Mobile should be a valid mobile number format e.g. 0111 222 333"}]},testId:"mobile",type:"tel"},{component:"CHECKBOX",name:"subscribeUser",label:"Subscribe to email updates",testId:"email-subscribe"},{component:"PLAIN_HTML",label:r.a.createElement(p,null),testId:"profile-privacy-link",name:"profile-privacy-link"}]}]},h=a("MHX4");t.a=function(e){var t=e.defaultValues,a=e.networkErrors,i=e.testId,l=Object(h.c)({mode:"onChange"});return l.watch(),Object(n.useEffect)((function(){l.reset(t)}),[t]),r.a.createElement(o.a,{networkErrors:a,defaultValues:t,submitButtonLabel:e.submitButtonLabel,methods:l,schema:f,testId:i,onSubmit:e.onSubmit,onSaveBeforeNavigate:e.onSaveBeforeNavigate})}},"a+qF":function(e,t,a){"use strict";a.r(t);a("VRzm"),a("Btvt"),a("OG14");var n=a("o0o1"),r=a.n(n),o=(a("ls82"),a("91GP"),a("q1tI")),i=a.n(o),l=a("Wbzz"),s=a("vqTq"),c=a("q8UK"),u=a.n(c),d=a("Udzp"),m=a("DCqK"),p=a("scg8"),f=a("N9+v"),h=a("ttZb"),b=a("bjRM"),v=a("YCiF"),y=a("BnTh"),E=a("w+R5"),g=a("CLrh"),T=a("asXk"),w=a("0+lk"),O=a("TJ1L"),I=a("C2HB"),k=a("eJi6");function q(e,t,a,n,r,o,i){try{var l=e[o](i),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,r)}function N(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){q(o,n,r,i,l,"next",e)}function l(e){q(o,n,r,i,l,"throw",e)}i(void 0)}))}}var S=new T.a,j=[{link:"/dashboard",text:"My dashboard"},{link:"/profile",text:"My profile"},{text:"Update my profile"}];t.default=function(e){var t=e.testCache,a=i.a.useState(!1),n=a[0],c=a[1],T=Object(o.useState)(!1),q=T[0],C=T[1],x=Object(o.useState)(Object(v.a)().data),P=x[0],L=x[1],D=(Object(v.a)().refetch,i.a.useState(Object.assign({},Object(v.a)().data.authAccount.contact))),_=D[0],R=D[1],U=new u.a,M=(U.signal,Object(o.useState)(!1)),A=M[0],B=M[1],Q=Object(o.useState)(!1),G=Q[0],X=Q[1];Object(o.useEffect)((function(){function e(){return(e=N(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.isLoggedIn();case 2:if(t=e.sent,B(t),a=S.isConsentOnly(),X(a),!a){e.next=9;break}return Object(l.navigate)("/consent"),e.abrupt("return",(function(){return U.abort()}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var F={};"undefined"!=typeof window&&(F=new URLSearchParams(window.location.search));var V=Object(h.c)(y.b,{client:Object(I.a)()}),H=V.loading,z=V.data,W=V.refetch,Y=Object(h.b)(b.a,{onCompleted:function(e){L(e.updateUser),R(Object.assign({},e.updateUser.authAccount.contact,{dob:e.updateUser.authAccount.contact.dob||""}))}})[0],K=Object(o.useState)([]),J=K[0],Z=K[1],$=Object(h.b)(y.d,{client:Object(I.a)(),onCompleted:function(e){var t=g.i.MAP_CONTACT(P,e);Y({variables:{user:t}}),R(Object.assign({},t.authAccount.contact)),Z([]),c(!0)},onError:function(e){console.log(e),Z([e.networkError.message])}})[0];Object(o.useEffect)((function(){var e;H||"CRM_ContactReturn"===(null==z||null===(e=z.result)||void 0===e?void 0:e.__typename)&&W().then((function(e){var t={authAccount:{contact:e.data.result.contact}};e.data.result.contact&&Y({variables:{user:E.a.convertStringToBoolean(t)}})}))}),[H]);var ee=function(e){Object(k.a)(e.tokenData)?C(g.i.IS_USER_REGISTERED(e)):Object(l.navigate)("/401")};return Object(o.useEffect)((function(){t&&(L(t),ee(t))}),[]),!G&&P.authAccount.isAuthenticated&&q?i.a.createElement(s.b,{metaTitle:"Profile",isLoggedIn:A,isConsentOnly:G,onCacheLoaded:ee},i.a.createElement(d.a,{title:"Update my profile",breadcrumbs:j},i.a.createElement("main",{className:"au-grid"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-xs-12 col-md-8"},H?i.a.createElement("div",{className:"flex flex-col"},"Please wait while we fetch your business details.",i.a.createElement(f.a,{spinnerType:"spinner--lg"})):n&&Boolean(F.get("profileUpdated"))?i.a.createElement(w.a,{as:"success","data-testid":"form-success"},i.a.createElement(O.d,null,"Your details have been updated"),i.a.createElement(O.a,null,i.a.createElement("li",null,i.a.createElement(O.b,{onClick:function(){c(!1)}},"Edit again")),i.a.createElement("li",null,i.a.createElement(O.c,{to:"/dashboard"},"Back to myQld dashboard")))):i.a.createElement(m.a,{networkErrors:J,testId:"update-form",submitButtonLabel:"Save",defaultValues:_,onSubmit:function(){var e=N(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$({variables:{input:E.a.convertStringToBoolean(t)}});case 2:Object(l.navigate)("/profile?profileUpdated=true"),setTimeout((function(){document.querySelector("body").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}),150);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSaveBeforeNavigate:function(){var e=N(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$({variables:{input:E.a.convertStringToBoolean(t)}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),i.a.createElement("div",{className:"col-xs-12 col-md-4"}," "))))):i.a.createElement(s.b,{metaTitle:"Profile",isLoggedIn:A,isConsentOnly:G,onCacheLoaded:ee},i.a.createElement(p.StyledWrapper,null,i.a.createElement("p",null,"Loading..."),i.a.createElement(f.a,{spinnerType:"spinner--lg"})))}},fFXF:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),o=a("9y+9"),i=a("/NL5");t.a=function(){return r.a.createElement("p",null,"When you access a Queensland Government service using the myQld portal, the Department may provide personal information in your myQld profile to the Queensland Government department responsible for delivering that service, including by way of pre-filling information in any application to be made through the portal. That department or agency will provide you with a privacy notice for information it collects from you through its service."," ",Object(i.d)().blarga_to_cm?r.a.createElement(r.a.Fragment,null,"You may go to ",r.a.createElement("a",{href:Object(o.a)()},"consent management")," ","to withdraw your consent at any time."):r.a.createElement(r.a.Fragment,null,"Contact 13QGOV (",r.a.createElement("a",{href:"tel:137468"},"13 74 68"),") to withdraw your consent."))}},"w+R5":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("rGqo"),a("yt8O"),a("Btvt"),a("RW0V");var n=function(){};n.convertStringToBoolean=function(e){return Object.keys(e).forEach((function(t){"true"===e[t]&&(e[t]=!0),"false"===e[t]&&(e[t]=!1)})),e}},z1st:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("q1tI"),r=a.n(n),o=a("LvDl"),i=a.n(o),l={hint:"You can update this in your",linkText:"QGov account",url:"https://identity.qld.gov.au/help/faq.html#howDoIChangeMyDetails",linkTitle:"Visit the QGov Frequently asked questions page."},s=function(e){var t=e.hint,a=e.linkText,n=e.linkTitle,o=e.url;return r.a.createElement("span",null,t+" ",r.a.createElement("a",{className:"hint-link",target:"_blank",rel:"noreferrer",title:n,href:o},a+" "))},c=function(e){return void 0===e&&(e={}),r.a.createElement(s,i.a.merge(l,e))}}}]);