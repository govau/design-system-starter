(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"83ZH":function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m}));a("VRzm"),a("Btvt");var n=a("o0o1"),r=a.n(n),o=(a("ls82"),a("lTCR")),i=a.n(o),c=a("C2HB");function s(e,t,a,n,r,o,i){try{var c=e[o](i),s=c.value}catch(l){return void a(l)}c.done?t(s):Promise.resolve(s).then(n,r)}function l(){var e=function(e,t){t||(t=e.slice(0));return e.raw=t,e}(['\n  query ServiceRequestDraftGet($id: String) {\n    result: ServiceRequestDraftGet(id: $id)\n      @rest(\n        type: "ServiceRequestDraft"\n        path: "citizen/servicerequestdrafts?draftid={args.id}"\n        method: "GET"\n      ) {\n      hasServiceRequestDraft\n\n      serviceRequestDraft @type(name: "test") {\n        SK\n        service\n        content\n        submitted\n        expires\n        createdAt\n        updatedAt\n        SRReference\n      }\n    }\n  }\n']);return l=function(){return e},e}var u=i()(l()),m=function(){var e,t=(e=r.a.mark((function e(t,a){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(c.a)(),e.next=3,n.query({query:u,variables:{id:encodeURIComponent(t)},fetchPolicy:"network-only",context:{fetchOptions:{signal:a}}});case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){s(o,n,r,i,c,"next",e)}function c(e){s(o,n,r,i,c,"throw",e)}i(void 0)}))});return function(e,a){return t.apply(this,arguments)}}()},jTD6:function(e,t,a){"use strict";a.d(t,"a",(function(){return De}));a("VRzm"),a("rE2o"),a("ioFf"),a("XfO3"),a("HEwt"),a("a1Th"),a("INYr"),a("dRSK"),a("OG14");var n=a("o0o1"),r=a.n(n),o=(a("L9s1"),a("rGqo"),a("yt8O"),a("Btvt"),a("RW0V"),a("ls82"),a("Z2Ku"),a("91GP"),a("f3/d"),a("q1tI")),i=a.n(o),c=a("5Qm2"),s=a("MHX4"),l=a("vkDE"),u=a("NyB7"),m=function(e){var t=e.defaultSlot,a=e.asideSlot;return i.a.createElement(u.a,null,i.a.createElement("div",{className:"au-grid"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-xs-12 col-md-4 col-md-push-8"},a),i.a.createElement("div",{className:"col-xs-12 col-md-8 col-md-pull-4"},t))))},d=(a("6VaU"),a("T39b"),a("vOnD")),f=a("q8UK"),p=a.n(f),h=a("KmiJ"),b=a("xy1H"),v=a("8out"),y=a("zz+D"),g=a("0+lk"),E=a("TJ1L"),S=a("Qb9D"),O=a("OKV4"),k=a("UD5t"),w=a("cr+I"),j=a("UPt7"),N=a("DjWZ"),D=a("rdrT"),C=a("IGjA"),x=a("zFd4");function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var I=(new p.a).signal,P=Object(d.b)("div").withConfig({displayName:"funnel-review___StyledDiv",componentId:"sc-1j1yyuu-0"})({fontSize:"0.875rem"}),A=Object(d.b)("div").withConfig({displayName:"funnel-review___StyledDiv2",componentId:"sc-1j1yyuu-1"})({fontSize:"0.875rem"}),V=function(e){if(e.summaryFormat&&"Not provided"!==e.value){var t=e.summaryFormat;return i.a.createElement(t,Object.assign({},e,{data:e.value}))}return Array.isArray(e.value)?e.value.map((function(t,a){return t.name?i.a.createElement(P,{key:e.name+"__"+a},t.name.toString()):i.a.createElement(A,{key:e.name+"__"+a},t.toString())})):e.label||e.value&&"Not provided"!==e.value?"object"===_(e.value)&&Object.keys(e.value).length>0?i.a.createElement("span",null):i.a.createElement("div",{style:{margin:0}},e.value):i.a.createElement("span",null)},q=Object(d.b)("div").withConfig({displayName:"funnel-review___StyledDiv3",componentId:"sc-1j1yyuu-2"})({paddingBottom:"0.5rem"}),B=Object(d.b)("div").withConfig({displayName:"funnel-review___StyledDiv4",componentId:"sc-1j1yyuu-3"})({paddingBottom:"0.5rem"}),M=function(e){var t=Object(s.c)(),a=function e(t){return t.reduce((function(t,a){if(a.schema)return e(a.schema.sections);var n=function(e){return e.reduce((function(e,t){var a;if(e&&e.find((function(e){return e.name===t.name})))return R(e);var n={};return"REPEATER"===t.component&&(n=t.repeaterProps.schema.sections[0].fields.reduce((function(e,t){var a,n;return["RADIO_INPUT_GROUP","SELECT"].includes(t.component)?(e[t.name]||(e[t.name]=[]),(a=e[t.name]).push.apply(a,R(t.options)),Object.assign({},e,((n={})[t.name]=R(new Set(e[t.name])),n))):e}),{})),[].concat(R(e),[{label:t.summaryLabel?t.summaryLabel:t.label,name:t.name,value:t.label?"Not provided":void 0,options:Object.keys(n).length>0?n:["RADIO_INPUT_GROUP","SELECT"].includes(t.component)?(a={},a[t.name]=t.options.flatMap((function(e){return e.isSubGroup?e.options:e})),a):{},summaryFormat:t.summaryFormat?t.summaryFormat:void 0,subFields:"REPEATER"===t.component?t.repeaterProps.schema.sections[0].fields.map((function(e){return e.name})):[]}])}),[])}(a.fields);return[].concat(R(t),R(n))}),[])},n=e.funnelSchema.steps.reduce((function(e,t){return t.schema?[].concat(R(e),[{name:t.name,data:a(t.schema.sections)}]):e}),[]),r=Object(b.c)(),c=r[0],l=r[1],u=Object(o.useState)(""),m=u[0],d=u[1],f=Object(o.useState)(n),p=f[0],_=f[1],T=Object(o.useState)(""),P=T[0],A=T[1],M=Object(o.useState)(!1),L=M[0],F=(M[1],Object(o.useState)(!1)),G=(F[0],F[1]),W=Object(o.useState)(!1),U=(W[0],W[1]),z=Object(o.useState)(!1),H=(z[0],z[1]),J=Object(o.useState)(!1),K=J[0],Q=J[1],Y=Object(x.b)();i.a.useEffect((function(){setTimeout((function(){_(p.map((function(e,t){var a=[];if("Tenants"===c.formData[t].stepName){var n=c.formData[t].data.tenants;if(n)return a=n.map((function(t){return{name:t["tenant-firstName"]+" "+t["tenant-lastName"],data:e.data.map((function(e){var a="Not provided";if(t[e.name])if(Array.isArray(t[e.name]))a=t[e.name];else if(e.options[e.name]&&Array.isArray(e.options[e.name])&&!Array.isArray(t[e.name])){var n=e.options[e.name].find((function(a){return a.isSubGroup?a.options.find((function(a){return a.value===t[e.name]})):a.value===t[e.name]}));a=n?n.label:a}else a=t[e.name];else e.subFields&&e.subFields.length>0&&(a=e.subFields.reduce((function(e,a){return t[a]&&(e[a]=t[a]),e}),{}),0===Object.keys(a).length&&(a="Not provided"));return Object.assign({},e,{value:a})}))}})),Object.assign({},e,{data:a})}return Object.assign({},e,{data:e.data.map((function(e){var a="Not provided";if(c.formData[t].data[e.name])if(Array.isArray(c.formData[t].data[e.name]))a=c.formData[t].data[e.name];else if(e.options[e.name]&&Array.isArray(e.options[e.name])&&!Array.isArray(c.formData[t].data[e.name])){var n=e.options[e.name].find((function(a){return a.isSubGroup?a.options.find((function(a){return a.value===c.formData[t].data[e.name]})):a.value===c.formData[t].data[e.name]}));a=n?n.label:a}else a=c.formData[t].data[e.name];else e.subFields.length>0&&(a=e.subFields.reduce((function(e,a){return c.formData[t].data[a]&&(e[a]=c.formData[t].data[a]),e}),{}),0===Object.keys(a).length&&(a="Not provided"));return Object.assign({},e,{value:a})}))})})))}),300),c.SRReference&&d(" - "+c.SRReference)}),[JSON.stringify(c)]);var Z=i.a.createElement("span",null,"I also declare that I have read, understood and agree to the terms of the"," ",i.a.createElement(C.a,{class:"inline",linkText:"Privacy Notice"})),$=c.service_id+"_review";return i.a.createElement(s.b,t,i.a.createElement("form",{id:$,onSubmit:t.handleSubmit((function(e){Y({type:"block"}),console.log("### review submit");var t=Object(w.parse)(location.search).id;Object(D.a)(t,c,I).then((function(e){var t=e.result;Y({type:"unblock"}),t.serviceRequestDraft.errored?(d(" - "+t.serviceRequestDraft.SRReference),Q(!0),setTimeout((function(){document.querySelector("body").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}),150)):l({type:v.a.SET_FUNNEL_COMPLETED})}))}))},i.a.createElement(y.c,null,i.a.createElement(j.a,{size:"lg",level:"2"},"Review application",m)),K&&i.a.createElement(g.a,{as:"error","data-testid":"form-error",className:"mt-2"},i.a.createElement(E.d,null,"We're sorry ... we are having trouble submitting your application."),i.a.createElement("p",null,"Your Application Reference Number is ",m,". You may confirm if all information is correct, check the Declaration checkboxes and try resubmitting the application later. If problem persists, please contact 13QGOV.")),!K&&i.a.createElement("p",null,"Please review the information you have supplied in this application. Once you have confirmed all information is correct, check the Declaration checkbox and then Submit."),i.a.createElement("ul",{className:"au-accordion-group pb-6 pt-6"},p.map((function(t,a){return"Tenants"===t.name?i.a.createElement("li",{key:t.name},i.a.createElement(h.a,{closed:!0,header:t.name},i.a.createElement("div",null,t.data.map((function(n){return n.data?i.a.createElement("li",{key:n.name},i.a.createElement(h.a,{closed:!0,header:n.name},n.data&&n.data.map((function(e,t){return i.a.createElement(q,{key:e.label+"-"+t},i.a.createElement("div",{style:{fontWeight:700}},e.label),V(e))})),i.a.createElement("button",{className:"au-btn au-btn--secondary text-sm mt-6",type:"button",onClick:function(){l({type:v.a.MOVE_TO_STEP,payload:{step:a,funnelSchema:e.funnelSchema}})}},"‚Üê Edit ",t.name))):null}))))):i.a.createElement("li",{key:t.name},i.a.createElement(h.a,{closed:!0,header:t.name},t.data.map((function(e,t){return i.a.createElement(B,{key:e.label+"-"+t},i.a.createElement("div",{style:{fontWeight:700}},e.label),V(e))})),i.a.createElement("button",{className:"au-btn au-btn--secondary text-sm mt-6",type:"button",onClick:function(){l({type:v.a.MOVE_TO_STEP,payload:{step:a,funnelSchema:e.funnelSchema}})}},i.a.createElement(S.a,{src:"/images/button-left-light.svg",width:"7",height:"12",alt:"left pointing arrow"}),"Edit ",t.name)))}))),i.a.createElement(N.a,{htmlFor:"additional-comments"},"Additional comments"),i.a.createElement("textarea",{className:"au-text-input au-text-input--block",name:"additional-comments",id:"additional-comments",value:P,maxLength:500,onChange:function(e){return t=e.target.value,void A(t);var t}}),i.a.createElement("div",{className:"au-form-group"},i.a.createElement("div",{className:" bg-white border border-solid border-gray-600 p-5"},i.a.createElement("fieldset",null,i.a.createElement("legend",null,i.a.createElement("h4",null,i.a.createElement("span",{className:"text-red-800 text-lg"},"*")," Declaration for BLARGA Application")),i.a.createElement("div",{className:"au-control-input au-control-input--block"},i.a.createElement(O.a,{validate:{required:"All declarations are required"},name:"declaration-one",label:"I declare that to the best of my knowledge, all information provided in this application (including supporting documentation), is true and correct.",defaultChecked:!1,testId:"declarations-are-required",onChange:function(e){G(e)}})),i.a.createElement("div",{className:"au-control-input au-control-input--block",style:{marginTop:"0px"}},i.a.createElement(O.a,{validate:{required:"All declarations are required"},name:"declaration-two",label:"I understand that I will commit an offence and be liable to a penalty under the Housing Act 2003 if I knowingly provide to the Department of Communities, Housing and Digital Economy false or misleading information that may influence decisions about my eligibility for housing services and may make my application invalid. ",defaultChecked:!1,testId:"offence-clause",onChange:function(e){U(e)}})),i.a.createElement("div",{className:"au-control-input au-control-input--block mt-0",style:{marginTop:"0px"}},i.a.createElement(O.a,{validate:{required:"All declarations are required"},name:"declaration-three",label:Z,defaultChecked:!1,testId:"confirm-read-terms-of-service",onChange:function(e){H(e)}}))),i.a.createElement("div",{className:"btn-cta-group"},i.a.createElement(k.a,{secondary:!0,type:"button",disabled:t.formState.isSubmitting,onClick:function(){l({type:v.a.PREV_STEP,payload:{funnelSchema:e.funnelSchema}}),setTimeout((function(){document.querySelector("body").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}),150)}},i.a.createElement(S.a,{src:"/images/button-left-light.svg",width:"7",height:"12",alt:"left pointing arrow"}),"Back"),i.a.createElement(k.a,{type:"submit",disabled:t.formState.isSubmitting,"data-testid":"submit-application",onClick:function(){var e={"additional-consent":L,"additional-comments":P};l({type:v.a.SET_FORM_DATA_VALUE,payload:{data:e,step:c.step}})}},"Submit application",i.a.createElement(S.b,{src:"/images/button-right-dark.svg",width:"7",height:"12",alt:"right pointing arrow"})))))))},L=a("ChEr"),F=(a("8+KV"),a("V+eJ"),a("hHhE"),a("/SS/"),function(e,t){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)});var G=function(){return(G=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function W(e){var t=e.className,a=e.counterClockwise,n=e.dashRatio,r=e.pathRadius,i=e.strokeWidth,c=e.style;return Object(o.createElement)("path",{className:t,style:Object.assign({},c,z({pathRadius:r,dashRatio:n,counterClockwise:a})),d:U({pathRadius:r,counterClockwise:a}),strokeWidth:i,fillOpacity:0})}function U(e){var t=e.pathRadius,a=e.counterClockwise?1:0;return"\n      M 50,50\n      m 0,-"+t+"\n      a "+t+","+t+" "+a+" 1 1 0,"+2*t+"\n      a "+t+","+t+" "+a+" 1 1 0,-"+2*t+"\n    "}function z(e){var t=e.counterClockwise,a=e.dashRatio,n=e.pathRadius,r=2*Math.PI*n,o=(1-a)*r;return{strokeDasharray:r+"px "+r+"px",strokeDashoffset:(t?-o:o)+"px"}}var H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return function(e,t){function a(){this.constructor=e}F(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}(t,e),t.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},t.prototype.getPathRadius=function(){return 50-this.props.strokeWidth/2-this.getBackgroundPadding()},t.prototype.getPathRatio=function(){var e=this.props,t=e.value,a=e.minValue,n=e.maxValue;return(Math.min(Math.max(t,a),n)-a)/(n-a)},t.prototype.render=function(){var e=this.props,t=e.circleRatio,a=e.className,n=e.classes,r=e.counterClockwise,i=e.styles,c=e.strokeWidth,s=e.text,l=this.getPathRadius(),u=this.getPathRatio();return Object(o.createElement)("svg",{className:n.root+" "+a,style:i.root,viewBox:"0 0 100 100","data-test-id":"CircularProgressbar"},this.props.background?Object(o.createElement)("circle",{className:n.background,style:i.background,cx:50,cy:50,r:50}):null,Object(o.createElement)(W,{className:n.trail,counterClockwise:r,dashRatio:t,pathRadius:l,strokeWidth:c,style:i.trail}),Object(o.createElement)(W,{className:n.path,counterClockwise:r,dashRatio:u*t,pathRadius:l,strokeWidth:c,style:i.path}),s?Object(o.createElement)("text",{className:n.text,style:i.text,x:50,y:50},s):null)},t.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},t}(o.Component);function J(e){e.children;var t=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a}(e,["children"]);return Object(o.createElement)("div",{"data-test-id":"CircularProgressbarWithChildren"},Object(o.createElement)("div",{style:{position:"relative",width:"100%",height:"100%"}},Object(o.createElement)(H,G({},t)),e.children?Object(o.createElement)("div",{"data-test-id":"CircularProgressbarWithChildren__children",style:{position:"absolute",width:"100%",height:"100%",marginTop:"-100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},e.children):null))}function K(e){return Object.keys(e).forEach((function(t){null==e[t]&&delete e[t]})),e}a("lIpO");var Q=d.b.div.withConfig({displayName:"styled-donut-progress__StyledDonutStepLabel",componentId:"sc-10hdlrz-0"})(["font-size:0.7rem;line-height:1.1rem;margin-top:-3px;"]),Y=d.b.div.withConfig({displayName:"styled-donut-progress__StyledDonutStep",componentId:"sc-10hdlrz-1"})(["font-size:0.8rem;font-weight:700;margin-top:-3px;"]),Z=function(e){return i.a.createElement(J,{value:e.value,minValue:e.minValue,maxValue:e.maxValue,strokeWidth:15,styles:(t={strokeLinecap:"butt",pathColor:"#0273EC"},a=t.rotation,n=t.strokeLinecap,r=t.textColor,o=t.textSize,c=t.pathColor,s=t.pathTransition,l=t.pathTransitionDuration,u=t.trailColor,m=t.backgroundColor,d=null==a?void 0:"rotate("+a+"turn)",f=null==a?void 0:"center center",{root:{},path:K({stroke:c,strokeLinecap:n,transform:d,transformOrigin:f,transition:s,transitionDuration:null==l?void 0:l+"s"}),trail:K({stroke:u,strokeLinecap:n,transform:d,transformOrigin:f}),text:K({fill:r,fontSize:o}),background:K({fill:m})})},i.a.createElement(Q,null,"Step"),i.a.createElement(Y,null,e.value," of ",e.maxValue));var t,a,n,r,o,c,s,l,u,m,d,f},$=a("yaOj"),X=a("s/Ur"),ee=d.b.div.withConfig({displayName:"funnel-progress-bar__SmallScreenProgressWrapper",componentId:"sc-12dwlas-0"})(["display:flex;",""],{marginBottom:"0.5rem"}),te=d.b.div.withConfig({displayName:"funnel-progress-bar__DonutWrapper",componentId:"sc-12dwlas-1"})(["min-width:80px;max-width:80px;display:inline-flex;"]),ae=d.b.div.withConfig({displayName:"funnel-progress-bar__DonutLabel",componentId:"sc-12dwlas-2"})(["display:inline-flex;width:70%;align-items:center;> div > div:first-child{font-weight:700;line-height 1rem;}> div > div{margin-top:0;padding-left:1rem;font-style:italic;font-size:0.9rem;}"]),ne=d.b.h2.withConfig({displayName:"funnel-progress-bar__ProgressHeading",componentId:"sc-12dwlas-3"})(["font-size:1.2rem !important;margin-bottom:10px !important;margin-top:9px !important;"]),re=function(e){var t=Object(b.c)(),a=t[0],n=t[1];return Object(X.useMediaQuery)({minDeviceWidth:"992px"})?i.a.createElement(i.a.Fragment,null,i.a.createElement(ne,null,"Progress"),i.a.createElement($.a,{style:{marginTop:"0"},items:e.funnelSchema.steps.map((function(t,r){var o="todo";r===a.step?o="doing":a.formData[r].submitted&&(o="done"),e.funnelSchema.steps.length-1===r&&a.reviewable&&(o="done");var i="done"===o||a.totalSteps-1===r&&a.reviewable||r>=1&&a.formData[r-1].submitted;return{status:o,text:""+t.name,disabled:!i||a.completed,onClick:function(){i&&n({type:v.a.MOVE_TO_STEP,payload:{step:r,funnelSchema:e.funnelSchema}})}}}))})):i.a.createElement(ee,null,i.a.createElement(te,null,i.a.createElement(Z,{value:a.step+1,minValue:0,maxValue:a.totalSteps})),i.a.createElement(ae,null,i.a.createElement("div",null,i.a.createElement("div",{className:"pl-2"},e.funnelSchema.steps[a.step].name),i.a.createElement("div",{className:"pl-2"},"Next: ",a.nextStep))))},oe=a("ttZb"),ie=a("83ZH"),ce=a("C2HB"),se=a("N9+v"),le=a("/NL5"),ue=d.b.ul.withConfig({displayName:"funnel-completed__StyledList",componentId:"sc-1nulf1a-0"})(["list-style-type:disc;padding-left:1rem;"]),me=function(){setTimeout((function(){document.querySelector("body").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}),150);var e=Object(s.c)(),t=Object(w.parse)(location.search).id,a=Object(oe.c)(ie.a,{client:Object(ce.a)(),variables:{id:t},fetchPolicy:"network-only"}),n=a.loading,r=a.data,o=Object(le.a)().blbsApi+"loanapplicationstatus",c=Object(le.c)().housingServiceCentreUrl;return n?i.a.createElement(se.a,{spinnerType:"spinner--lg "}):!n&&r?i.a.createElement(s.b,e,i.a.createElement(g.a,{as:"success","data-testid":"form-success",className:"mt-2"},i.a.createElement(E.d,null,"Your application has been submitted"),i.a.createElement("p",null,"Your Application Reference Number is:"," ",i.a.createElement("a",{href:"/applications"},r.result.serviceRequestDraft[0].SRReference))),i.a.createElement("h4",null,"What happens next?"),i.a.createElement("p",null,"If you‚Äôve submitted an online application for a Bond Loan or Rental Grant, you can"," ",i.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer"},"check the status of your online application")," ","using your online application reference number / Bond Loan or Rental Grant number and your date of birth."),i.a.createElement("p",null,"Please allow a minimum of 15 minutes for your application to be received before checking your application status."),i.a.createElement("p",null,"Once your application has been assessed we will contact you if we require more information, otherwise we will notify you of the outcome by phone and/or email."),i.a.createElement("h4",null,"More information"),i.a.createElement("p",null,"For more information about Bond Loans and Rental Grants:"),i.a.createElement("p",null," "),i.a.createElement(ue,null,i.a.createElement("li",null,"phone Housing Services on ",i.a.createElement("a",{href:"tel:137468"},"13 QGOV")," (",i.a.createElement("a",{href:"tel:137468"},"13 74 68"),")"),i.a.createElement("li",null,"email"," ",i.a.createElement("a",{href:"mailto:ICCHousingEnquiries@smartservice.qld.gov.au"},"ICCHousingEnquiries@smartservice.qld.gov.au")),i.a.createElement("li",null,"contact your nearest"," ",i.a.createElement("a",{rel:"noreferrer",target:"_blank",href:c},"Housing Service Centre")))):void 0},de=a("n0QP"),fe=a("fMus"),pe=a("+h6E");function he(e,t,a,n,r,o,i){try{var c=e[o](i),s=c.value}catch(l){return void a(l)}c.done?t(s):Promise.resolve(s).then(n,r)}function be(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){he(o,n,r,i,c,"next",e)}function c(e){he(o,n,r,i,c,"throw",e)}i(void 0)}))}}function ve(e){return function(e){if(Array.isArray(e))return Ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=ge(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(a=e[Symbol.iterator]()).next.bind(a)}function ge(e,t){if(e){if("string"==typeof e)return Ee(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ee(e,t):void 0}}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Se=(new p.a).signal,Oe=function(e){return e.map((function(e){return{name:e.name,attributeName:e.attributeName,hiddenattributenames:e.hiddenattributenames}}))};function ke(e){if(e.steps)for(var t,a=ye(e.steps);!(t=a()).done;){var n,r=t.value;if(null===(n=r.schema)||void 0===n?void 0:n.sections)for(var o,i=ye(r.schema.sections);!(o=i()).done;){var c,s=o.value;if(s.fields)for(var l,u=ye(s.fields);!(l=u()).done;){if("DVS"===l.value.component)return e.steps.indexOf(r)}if(null===(c=s.schema)||void 0===c?void 0:c.sections)for(var m,d=ye(s.schema.sections);!(m=d()).done;){var f=m.value;if(f.fields)for(var p,h=ye(f.fields);!(p=h()).done;){if("DVS"===p.value.component)return e.steps.indexOf(r)}}}}return-1}function we(e){var t={};return t["requestDetails-serviceType"]=e.serviceType,Object.assign({},t,{name:e.name,service_id:e.service_id,step:0,totalSteps:e.steps.length,nextStep:e.steps[1].name,previousStep:"",reviewable:!1,completed:!1,formData:e.steps.map((function(e,t){var a={},n={};if(e.schema){var r=[];e.schema.sections.forEach((function(e){var t=[];e.schema&&e.schema.sections.forEach((function(e){t=[].concat(ve(t),ve(Oe(e.fields)))})),r=[].concat(ve(r),ve(Oe(e.fields||[])),ve(t))})),a=r.reduce((function(e,t){var a={};return e[t.name]="",t.hiddenattributenames&&(a={},t.hiddenattributenames.forEach((function(e){a[""+t.name+e.name]=""}))),Object.assign({},e,a)}),{}),n=r.reduce((function(e,t){var a={};return e[t.name]=t.attributeName||"",t.hiddenattributenames&&(a={},t.hiddenattributenames.forEach((function(e){a[""+t.name+e.name]=e.value||""}))),Object.assign({},e,a)}),{})}return{step:t,data:a,attributeMap:n,stepName:e.name,submitted:!1}})),dynamicInputNames:[]})}var je=function(e){var t=Object(b.c)(),a=t[0],n=t[1];return Object(o.useEffect)((function(){a.step===e.funnelSchema.steps.length-1&&n({type:v.a.SET_FORM_REVIEWABLE})}),[a.step]),i.a.createElement("div",null,e.funnelSchema.steps.map((function(t,n){if(a.step!==n)return null;var r=a.formData;if(r.forEach((function(e){e.data=l.a.convertStringToNumber(e.data),e.data=l.a.convertIncomeTypeAttachments(e.data)})),a.completed){if(r.forEach((function(e){e.data=l.a.convertStringToBoolean(e.data)})),a.dvsBirthState&&delete a.dvsBirthState,"undefined"!=typeof window)"production"===window.runtimeConfig.env.name||!1||console.log("payload",a),window.localStorage.setItem("formPayload",JSON.stringify(a));return i.a.createElement(me,{key:"complete"})}return a.step===e.funnelSchema.steps.length-1&&a.step===n?i.a.createElement("div",{key:t.name+"-"+n},i.a.createElement(M,{key:"review",funnelSchema:e.funnelSchema})):i.a.createElement(Ne,{key:t.name+"-"+n,name:t.name,schema:t.schema,step:n,funnelSchema:e.funnelSchema})})))},Ne=function(e){var t=Object(b.c)(),a=t[0],n=t[1],r=Object(s.c)({mode:"onChange"});r.watch();var l=Object(o.useState)(null),u=l[0],m=l[1];return Object(o.useEffect)((function(){var t=Object(w.parse)(location.search);m(t.id),r.reset(a.formData.find((function(t,a){return a===e.step})).data)}),[]),i.a.createElement(c.a,{key:e.name,isFunnel:!0,defaultValues:a.formData.find((function(t,a){return a===e.step})).data,submitButtonLabel:"Next step",methods:r,funnelStep:e.step,schema:e.schema,onBack:function(){n({type:v.a.PREV_STEP,payload:{funnelSchema:e.funnelSchema}}),setTimeout((function(){document.querySelector("body").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}),150)},onSaveBeforeNavigate:function(t){var n=e.step,r=a.formData.findIndex((function(e,t){return t===n})),o=ve(a.formData);o[r].data=t,Object(pe.b)(Object.assign({},a,{formData:o}),u)},onSubmit:function(t){var a=t.data,r=t.step;setTimeout((function(){document.querySelector("body").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}),150),n({type:v.a.SET_FORM_DATA_VALUE,payload:{data:a,step:e.step}}),n({type:v.a.SET_FORM_SUBMITTED,payload:{step:e.step}}),n(r?{type:v.a.MOVE_TO_STEP,payload:{step:r,funnelSchema:e.funnelSchema}}:{type:v.a.NEXT_STEP,payload:{funnelSchema:e.funnelSchema}})}})},De=function(e){var t=Object(o.useMemo)((function(){return function(e){var t=e.steps.reduce((function(e,t){return t.schema&&(t.schema.sections=Object(L.b)(t.schema).sections,t.schema.sections.forEach((function(e){e.schema&&(e.schema.sections=Object(L.b)(e.schema).sections)}))),t.stepCollection?[].concat(ve(e),ve(Object(de.a)(t.stepCollection,t.applicationName))):[].concat(ve(e),[t])}),[]);return Object.assign({},e,{steps:[].concat(ve(t),[{name:"Review"}])})}(e.funnelSchema)}),[e.funnelSchema]),a=Object(o.useState)(t),n=a[0],c=a[1],s=Object(o.useState)(e.clientCache),u=(s[0],s[1],Object(o.useState)(void 0)),d=u[0],f=u[1],p=function(e,a){void 0===a&&(a=!1);var r,o=[],i=[];e.formData.forEach((function(e,a){if(e.step<t.steps.length-1){var n=!0;for(var r in e.attributeMap)if(null===e.data[r]||void 0===e.data[r]||"string"==typeof e.data[r]&&""===e.data[r].trim()){n=!1;break}n&&(e.submitted=!0,o.push(e),i.push(a))}})),r=e.formData.filter((function(e){return!i.includes(e.step)}));var s=[].concat(o,ve(r));s.forEach((function(e,t){e.step=t}));var l=n.steps.filter((function(e,t){return i.includes(t)})),u=n.steps.filter((function(e,t){return!i.includes(t)})),m=u.length>1?u[1].name:"Review",d=l.length>0?l[l.length-1].name:"";if(a){var p=[];e.formData.forEach((function(e){p.push.apply(p,ve(n.steps.filter((function(t){return t.name===e.stepName}))))})),c(Object.assign({},n,{steps:p}))}else f(Object.assign({},e,{formData:s,step:o.length,previousStep:d,nextStep:m})),c(Object.assign({},n,{steps:[].concat(ve(l),ve(u))}))},h=function(){var a=be(r.a.mark((function a(n,o){var i,c,s,l,u,m,d,f,h;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0===o&&(o=!1),c=null===(i=e.clientCache)||void 0===i?void 0:i.tokenData,s=c.firstName,l=c.lastName,u=c.email,m=c.dob,d=c.middleName,f={"person-firstName":s,"person-lastName":l,"person-email":u,"person-dateOfBirth":m,"person-middleName":d},h=Object.keys(f),!n){a.next=7;break}return a.next=7,Object(fe.a)(Se).then((function(e){n.formData.forEach((function(t){Object.keys(t.attributeMap).forEach((function(a){""!==t.attributeMap[a]&&""===t.data[a]&&(e.result.forEach((function(e){if(e.attribute===t.attributeMap[a])try{var n=JSON.parse(e.value);t.data[a]=n}catch(r){t.data[a]=e.value}})),h.includes(a)&&f[a]&&(t.data[a]=f[a]))}))})),e&&Array.isArray(e.result)&&e.result.forEach((function(e){if("DVS"===e.provider){var a;switch(e.attribute){case"dvs.MD":case"dvs.MD.G":a="MEDICARE";break;case"dvs.PP":a="PASSPORT";break;case"dvs.BC":a="BIRTHCERT";break;case"dvs.CC":a="AUSCITCER"}if(a)for(var r,o=ye(n.formData);!(r=o()).done;){var i=r.value,c=ke(t);if(i.step===c){void 0===i.data["person-residencyDVSDocumentType"]&&(i.data["person-residencyDVSDocumentType"]=a),void 0===i.data["person-residencyDVSConsent"]&&(i.data["person-residencyDVSConsent"]=!0),void 0===i.data["person-residencyDVSStatus"]&&(i.data["person-residencyDVSStatus"]=!0);break}}}})),p(n,o)})).catch((function(e){console.log(e)}));case 7:return a.abrupt("return",n);case 8:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();return Object(o.useEffect)((function(){(function(){var a=be(r.a.mark((function a(){var o,i,c,s,u;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=18;break}if(!e.defaultValues){a.next=12;break}return o=function(){return console.log("Retrieve dynamic input names:...."),"{}"===JSON.stringify(e.defaultValues.dynamicInputNames)?(console.log("It is an object type, return empty array"),[]):(console.log("It is not an object, returning:",e.defaultValues.dynamicInputNames),e.defaultValues.dynamicInputNames)}(),i=Object.assign({},e.defaultValues,{dynamicInputNames:o}),a.next=7,h(i,!0);case 7:void 0!==(i=a.sent).formData&&((c=i.formData)&&c.forEach((function(e){e.data=l.a.convertBooleanToString(e.data)})),i.formData=c),f(i),a.next=18;break;case 12:return s=we(n),a.next=15,h(s);case 15:void 0!==(s=a.sent).formData&&((u=s.formData)&&u.forEach((function(e){e.data=l.a.convertBooleanToString(e.data)})),s.formData=u),f(s);case 18:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}),[t,e.defaultValues]),d&&n?i.a.createElement(b.b,{reducer:b.a,initialState:d},i.a.createElement("div",null,i.a.createElement(m,{defaultSlot:i.a.createElement(je,{funnelSchema:n}),asideSlot:i.a.createElement(re,{funnelSchema:n})}))):i.a.createElement("div",null)}},lIpO:function(e,t,a){},yaOj:function(e,t,a){"use strict";a("rGqo"),a("yt8O"),a("Btvt"),a("RW0V"),a("91GP"),a("tUrg");var n=a("q1tI"),r=a.n(n);function o(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}var i={doing:"Doing",todo:"To do",done:"Done"},c=function(e){var t=e.link,a=e.linkComponent,n=e.text,c=e.status,s=e.statusText,l=e.className,u=void 0===l?"":l,m=e.li,d=void 0===m?{}:m,f=e.testId,p=void 0===f?"":f,h=o(e,["link","linkComponent","text","status","statusText","className","li","testId"]),b=a;return t&&("a"===b?h.href=t:"function"==typeof b&&(h.to=t)),r.a.createElement("li",d,t?r.a.createElement(b,Object.assign({className:"au-progress-indicator__link au-progress-indicator__link--"+c+" "+u},h,{"data-testid":p+"-"+c}),r.a.createElement("span",{className:"au-progress-indicator__status"},s||i[c]),n):r.a.createElement("button",Object.assign({className:"au-progress-indicator__link au-progress-indicator__link--"+c+" "+u},h,{"data-testid":p+"-"+c}),r.a.createElement("span",{className:"au-progress-indicator__status"},s||i[c]),n))};c.defaultProps={linkComponent:"a"};var s=function(e){var t=e.dark,a=e.linkComponent,n=e.items,i=e.className,s=void 0===i?"":i,l=o(e,["dark","linkComponent","items","className"]);return r.a.createElement("ul",Object.assign({className:"au-progress-indicator"+(t?" au-progress-indicator--dark":"")+" "+s},l),n.map((function(e,t){return r.a.createElement(c,Object.assign({linkComponent:a,key:t},e))})))};s.defaultProps={linkComponent:"a"},t.a=s}}]);